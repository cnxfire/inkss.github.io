<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="robots" content="noarchive"><meta http-equiv="x-dns-prefetch-control" content="on"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="nosniff"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>泛域名解析配置：从 Nginx 到 CDN - 枋柚梓的猫会发光</title><meta name="keywords" content="Nginx,CDN,泛域名,宝塔"><meta name="description" content="本文共包含以下内容：Nginx 泛域名解析、根据 subdomain 匹配反代地址、防止恶意泛域名解析、BasicAuth 的认证校验、宝塔面板的反代访问、泛域名 SSL 证书申请、泛域名 CDN 分发和泛域名证书的自部署。"><link rel="alternate" href="/atom.xml" title="枋柚梓的猫会发光" type="application/atom+xml"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preload" href="https://static.inkss.cn/css/style.css?time=1626801806000" as="style"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><style>#safearea{display:none}@supports (backdrop-filter:blur(20px)){.blur{background:rgba(255,255,255,.9)!important;backdrop-filter:saturate(200%) blur(20px)}}.shadow{box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.shadow.floatable{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.shadow.floatable:hover{box-shadow:0 2px 4px 0 rgba(0,0,0,.1),0 4px 8px 0 rgba(0,0,0,.1),0 8px 16px 0 rgba(0,0,0,.1)}@font-face{font-family:fwzc;src:url(https://cdn.jsdelivr.net/gh/inkss/common@master/hexo/fonts/foundertype/fwzcN.OTF);font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:sxls;src:url(https://cdn.jsdelivr.net/gh/inkss/common@master/hexo/fonts/foundertype/sxls.OTF);font-weight:300;font-style:normal;font-display:swap}.article-title,.md .footer .header,.meta-v3,.new-meta-box,.prev-next,.widget header,details summary{font-family:sxls,"PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace}:root{--site-bg:#f8f8f8;--block:#f2f2f2;--block-border:#e7e7e7;--block-hover:#ededed;--text-p0:#000;--text-p1:#222;--text-p2:#4c4c4c;--text-p3:#777;--text-meta:#cdcdcd;--card:#fff;--theme-highlight:#2fd3ae;--theme-bg:#ecfbf7}body[theme=dark]{--site-bg:#000;--block:#111;--block-border:#282828;--block-hover:#1c1c1c;--text-p0:#fff;--text-p1:#fff;--text-p2:#b2b2b2;--text-p3:#727272;--text-meta:#4c4c4c;--card:#333;--theme-highlight:#44d7b6;--theme-bg:#344340}:root{--color-site-body:#f4f4f4;--color-site-bg:#f4f4f4;--color-site-inner:#fff;--color-site-footer:#444;--color-card:#fff;--color-text:#444;--color-block:#f6f6f6;--color-inlinecode:#c74f00;--color-codeblock:#fff7ea;--color-h1:#3a3a3a;--color-h2:#3a3a3a;--color-h3:#333;--color-h4:#444;--color-h5:#555;--color-h6:#666;--color-p:#444;--color-list:#666;--color-list-hl:#36ac91;--color-meta:#666}*{box-sizing:border-box;outline:0;margin:0;padding:0}html{color:var(--color-text);width:100%;height:100%;font-family:fwzc,-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,Menlo,Monaco,monospace,sans-serif;font-size:16px}html>::-webkit-scrollbar{height:4px;width:4px}html>::-webkit-scrollbar-track-piece{background:0 0}html>::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:2px}html>::-webkit-scrollbar-thumb:hover{background:#ff5722}body{background-color:var(--color-site-body);text-rendering:optimizelegibility;-webkit-tap-highlight-color:transparent;line-height:1.6;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}body.modal-active{overflow:hidden}@media screen and (max-width:680px){body.modal-active{position:fixed;top:0;right:0;bottom:0;left:0}}::-moz-selection{background:rgba(39,174,96,.2)}::selection{background:rgba(39,174,96,.2)}h1{font-size:1.5rem}h2{font-size:1.5rem}h3{font-size:1.25rem}h4{font-size:1.125rem}h5{font-size:1rem}h6{font-size:1rem}h1,h2,h3,h4,h6{font-weight:400}a{color:#2196f3;cursor:pointer;text-decoration:none;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}a:hover{color:#ff5722}a:active,a:hover{outline:0}a:not([href]){cursor:default}pre{tab-size:4;-moz-tab-size:4;-o-tab-size:4;-webkit-tab-size:4}.clearfix{zoom:1}.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.hidden{text-indent:-9999px;visibility:hidden;display:none}.inner{position:relative;width:80%;max-width:710px;margin:0 auto}.vertical{display:table-cell;vertical-align:middle}ol,ul{padding-left:0}ol li,ul li{list-style:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}article{overflow:hidden}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:50%;line-height:1em}sup{vertical-align:text-top}sub{vertical-align:text-bottom}img{border:0;background:0 0;max-width:100%}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0;border:0;border-radius:1px;border-bottom:1px solid rgba(68,68,68,.1)}pre{overflow:auto}span.dot,span.sep{font-size:.9em;margin:0 .2rem}span.dot:before{content:'·'}span.sep:before{content:'/'}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table:not([class]){border-collapse:collapse;overflow:auto;display:inline-block;max-width:100%;vertical-align:text-top}table:not([class]) th{background-color:#f1f1f1}table:not([class]) td,table:not([class]) th{padding:8px 16px;border:2px solid #f1f1f1;line-height:1.5;font-size:90%}table:not([class]) tr{word-break:keep-all;background-color:#fefefe;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}table:not([class]) tr:hover{background-color:#f1f1f1}td,th{padding:0}#l_cover{min-height:64px}.cover-wrapper{top:0;left:0;max-width:100%;height:100vh;display:flex;flex-wrap:nowrap;flex-direction:column;align-items:center;align-self:center;align-content:center;color:var(--color-site-inner);padding:0 16px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;position:relative;overflow:hidden;margin-bottom:-100px}.cover-wrapper #cover-backstretch,.cover-wrapper .cover-bg{position:absolute;width:100%;height:100%;background-position:center;background-size:cover}.cover-wrapper #cover-backstretch.lazyload:not(.loaded),.cover-wrapper .cover-bg.lazyload:not(.loaded){opacity:0}.cover-wrapper #cover-backstretch.lazyload.loaded,.cover-wrapper .cover-bg.lazyload.loaded{animation-delay:0s;animation-duration:.5s;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-name:fadeIn}@-moz-keyframes fadeIn{0%{opacity:0;filter:blur(12px);transform:scale(1.02)}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0;filter:blur(12px);transform:scale(1.02)}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0;filter:blur(12px);transform:scale(1.02)}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0;filter:blur(12px);transform:scale(1.02)}100%{opacity:1}}.cover-wrapper .cover-body{z-index:1;position:relative;width:100%;height:100%}.cover-wrapper#full{height:calc(100vh + 100px);padding-bottom:100px}.cover-wrapper#half{max-height:640px;min-height:400px;height:calc(36vh - 64px + 200px)}.cover-wrapper #scroll-down{width:100%;height:64px;position:absolute;bottom:100px;text-align:center;cursor:pointer}.cover-wrapper #scroll-down .scroll-down-effects{color:#fff;font-size:24px;line-height:64px;position:absolute;width:24px;left:calc(50% - 12px);text-shadow:0 1px 2px rgba(0,0,0,.1);animation:scroll-down-effect 1.5s infinite}@-moz-keyframes scroll-down-effect{0%{top:0;opacity:1}50%{top:-16px;opacity:.4}100%{top:0;opacity:1}}@-webkit-keyframes scroll-down-effect{0%{top:0;opacity:1}50%{top:-16px;opacity:.4}100%{top:0;opacity:1}}@-o-keyframes scroll-down-effect{0%{top:0;opacity:1}50%{top:-16px;opacity:.4}100%{top:0;opacity:1}}@keyframes scroll-down-effect{0%{top:0;opacity:1}50%{top:-16px;opacity:.4}100%{top:0;opacity:1}}.cover-wrapper .cover-body{margin-top:64px;margin-bottom:100px}.cover-wrapper .cover-body,.cover-wrapper .cover-body .bottom,.cover-wrapper .cover-body .top{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:100%}.cover-wrapper .cover-body .bottom{margin-top:32px}.cover-wrapper .cover-body .title{font-family:sxls,"PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace;font-size:3.125rem;line-height:1.2;text-shadow:0 1px 2px rgba(0,0,0,.1);text-align:center}.cover-wrapper .cover-body .subtitle{font-size:20px}.cover-wrapper .cover-body .logo{max-height:120px;max-width:calc(100% - 4 * 16px)}@media screen and (min-height:1024px){.cover-wrapper .cover-body .title{font-size:3rem}.cover-wrapper .cover-body .subtitle{font-size:1.05rem}.cover-wrapper .cover-body .logo{max-height:150px}}.cover-wrapper .cover-body .m_search{position:relative;max-width:calc(100% - 16px);width:320px;vertical-align:middle}.cover-wrapper .cover-body .m_search .form{position:relative;display:block;width:100%}.cover-wrapper .cover-body .m_search .icon,.cover-wrapper .cover-body .m_search .input{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.cover-wrapper .cover-body .m_search .icon{position:absolute;display:block;line-height:2.5rem;width:32px;top:0;left:5px;color:rgba(68,68,68,.75)}.cover-wrapper .cover-body .m_search .input{display:block;height:2.5rem;width:100%;box-shadow:none;box-sizing:border-box;font-size:.875rem;-webkit-appearance:none;padding-left:36px;border-radius:1.4rem;background:rgba(255,255,255,.6);backdrop-filter:blur(10px);border:none;color:var(--color-text)}@media screen and (max-width:500px){.cover-wrapper .cover-body .m_search .input{padding-left:36px}}.cover-wrapper .cover-body .m_search .input:hover{background:rgba(255,255,255,.8)}.cover-wrapper .cover-body .m_search .input:focus{background:#fff}.cover-wrapper .list-h{display:flex;flex-direction:row;flex-wrap:wrap;align-items:stretch;border-radius:4px;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}.cover-wrapper .list-h a{flex:1;display:flex;font-weight:600}.cover-wrapper .list-h a img{display:block;border-radius:2px;margin:4px;min-width:40px;max-width:44px}@media screen and (max-width:768px){.cover-wrapper .list-h a img{min-width:36px;max-width:40px}}@media screen and (max-width:500px){.cover-wrapper .list-h a img{margin:2px 4px;min-width:32px;max-width:36px}}@media screen and (max-width:375px){.cover-wrapper .list-h a img{min-width:28px;max-width:32px}}.cover-wrapper{max-width:100%}.cover-wrapper.search .bottom .menu{margin-top:16px}.cover-wrapper.search .bottom .menu .list-h a{white-space:nowrap;flex-direction:row;align-items:baseline;padding:2px;margin:4px;color:var(--color-site-inner);opacity:.75;text-shadow:0 1px 2px rgba(0,0,0,.05);border-bottom:2px solid transparent}.cover-wrapper.search .bottom .menu .list-h a i{margin-right:4px}.cover-wrapper.search .bottom .menu .list-h a p{font-size:.9375rem}.cover-wrapper.search .bottom .menu .list-h a.active,.cover-wrapper.search .bottom .menu .list-h a:active,.cover-wrapper.search .bottom .menu .list-h a:hover{opacity:1;border-bottom:2px solid var(--color-site-inner)}.cover-wrapper.dock .menu,.cover-wrapper.featured .menu,.cover-wrapper.focus .menu{border-radius:6px}.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{flex-direction:column;align-items:center;padding:12px;line-height:24px;border-radius:4px;border-bottom:none;text-align:center;align-content:flex-end;color:rgba(68,68,68,.7);font-size:1.5rem}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h a,.cover-wrapper.featured .menu .list-h a,.cover-wrapper.focus .menu .list-h a{padding:12px 8px}}.cover-wrapper.dock .menu .list-h a i,.cover-wrapper.featured .menu .list-h a i,.cover-wrapper.focus .menu .list-h a i{margin:8px}.cover-wrapper.dock .menu .list-h a p,.cover-wrapper.featured .menu .list-h a p,.cover-wrapper.focus .menu .list-h a p{font-size:.875rem}.cover-wrapper.dock .menu .list-h a.active,.cover-wrapper.featured .menu .list-h a.active,.cover-wrapper.focus .menu .list-h a.active{background:var(--color-card);backdrop-filter:none}.cover-wrapper.dock .menu .list-h a.active i,.cover-wrapper.dock .menu .list-h a.active i+p,.cover-wrapper.featured .menu .list-h a.active i,.cover-wrapper.featured .menu .list-h a.active i+p,.cover-wrapper.focus .menu .list-h a.active i,.cover-wrapper.focus .menu .list-h a.active i+p{color:#44d7b6}.cover-wrapper.dock .menu .list-h a.active img+p,.cover-wrapper.featured .menu .list-h a.active img+p,.cover-wrapper.focus .menu .list-h a.active img+p{color:var(--color-text)}.cover-wrapper.dock .menu .list-h a:hover,.cover-wrapper.featured .menu .list-h a:hover,.cover-wrapper.focus .menu .list-h a:hover{background:var(--color-card)}.cover-wrapper.dock .top{margin-bottom:48px}.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);position:absolute;bottom:0;max-width:100%}.cover-wrapper.dock .menu .list-h{flex-wrap:nowrap;margin:4px}.cover-wrapper.dock .menu .list-h a+a{margin-left:4px}@media screen and (max-width:500px){.cover-wrapper.dock .menu .list-h{overflow-x:scroll}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar{height:0;width:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-track-piece{background:0 0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:0}.cover-wrapper.dock .menu .list-h::-webkit-scrollbar-thumb:hover{background:#ff5722}}@supports (backdrop-filter:blur(20px)){.cover-wrapper.dock .menu{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(20px)}}.cover-wrapper.featured .menu .list-h{margin:-2px}.cover-wrapper.featured .menu .list-h a{margin:2px;background:rgba(255,255,255,.5)}@supports (backdrop-filter:blur(20px)){.cover-wrapper.featured .menu .list-h a{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(20px)}}.cover-wrapper.focus .menu{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.cover-wrapper.focus .menu .list-h{margin:2px}.cover-wrapper.focus .menu:hover{background:rgba(255,255,255,.5)}@supports (backdrop-filter:blur(20px)){.cover-wrapper.focus .menu:hover{background:rgba(255,255,255,.5);backdrop-filter:saturate(200%) blur(20px)}}.cover-wrapper.focus .menu .list-h a{margin:2px}.cover-wrapper.focus .menu .list-h a:hover{opacity:1;background:var(--color-card)}.cover-wrapper #parallax-window{position:absolute;width:100%;height:100%;background:0 0}.parallax-mirror{animation-delay:0s;animation-duration:.5s;animation-fill-mode:forwards;animation-timing-function:ease-out;animation-name:fadeIn}@-moz-keyframes fadeIn{0%{opacity:0;filter:blur(12px)}100%{opacity:1}}@-webkit-keyframes fadeIn{0%{opacity:0;filter:blur(12px)}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0;filter:blur(12px)}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0;filter:blur(12px)}100%{opacity:1}}.l_header{position:fixed;z-index:1000;top:0;width:100%;height:64px;background:var(--color-card);box-shadow:0 1px 2px 0 rgba(0,0,0,.1)}.l_header.auto{transition:opacity .4s ease;-moz-transition:opacity .4s ease;-webkit-transition:opacity .4s ease;-o-transition:opacity .4s ease;visibility:hidden}.l_header.auto.show{opacity:1!important;visibility:visible}.l_header .container{margin-left:16px;margin-right:16px}.l_header #wrapper{height:100%;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}.l_header #wrapper .nav-main,.l_header #wrapper .nav-sub{display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center}.l_header #wrapper .nav-main{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.l_header #wrapper.sub .nav-main{transform:translateY(-64px)}.l_header #wrapper .nav-sub{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;opacity:0;height:64px;width:calc(100% - 2 * 16px);position:absolute}@media screen and (min-width:2048px){.l_header #wrapper .nav-sub{max-width:55vw;margin:auto}}.l_header #wrapper.sub .nav-sub{opacity:1}.l_header #wrapper .title{position:relative;color:var(--color-text);padding-left:24px;max-height:64px}.l_header #wrapper .nav-main .title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-shrink:0;line-height:64px;padding:0 24px;font-size:1.25rem;font-family:sxls,"PingFang SC","Microsoft YaHei",Helvetica,Arial,Helvetica,monospace}.l_header #wrapper .nav-main .title img{height:64px}.l_header .nav-sub{max-width:1200px;margin:auto}.l_header .nav-sub .title{font-weight:700;font-family:fwzc,-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,Menlo,Monaco,monospace,sans-serif;line-height:1.2;max-height:64px;white-space:normal;flex-shrink:1}.l_header .switcher{display:none;line-height:64px;align-items:center}.l_header .switcher .s-toc{display:none}@media screen and (max-width:768px){.l_header .switcher .s-toc{display:flex}}.l_header .switcher>li{height:48px;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;margin:2px}@media screen and (max-width:500px){.l_header .switcher>li{margin:0 1px;height:48px}}.l_header .switcher>li>a{display:flex;justify-content:center;align-items:center;width:48px;height:48px;padding:.85em 1.1em;border-radius:100px;border:none;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;color:#44d7b6}.l_header .switcher>li>a:hover{border:none}.l_header .switcher>li>a.active,.l_header .switcher>li>a:active{border:none;background:var(--color-site-bg)}@media screen and (max-width:500px){.l_header .switcher>li>a{width:36px;height:48px}}.l_header .nav-sub .switcher{display:flex}.l_header .m_search{display:flex;height:64px;width:240px;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}@media screen and (max-width:1024px){.l_header .m_search{width:44px;min-width:44px}.l_header .m_search input::placeholder{opacity:0}.l_header .m_search:hover{width:240px}.l_header .m_search:hover input::placeholder{opacity:1}}@media screen and (min-width:500px){.l_header .m_search:hover .input{width:100%}.l_header .m_search:hover .input::placeholder{opacity:1}}@media screen and (max-width:500px){.l_header .m_search{min-width:0}.l_header .m_search input::placeholder{opacity:1}}.l_header .m_search .form{position:relative;display:flex;width:100%;align-items:center}.l_header .m_search .icon{position:absolute;width:36px;left:5px;color:var(--color-meta)}@media screen and (max-width:500px){.l_header .m_search .icon{display:none}}.l_header .m_search .input{display:block;padding-top:8px;padding-bottom:8px;line-height:1.3;width:100%;color:var(--color-text);background:#fafafa;box-shadow:none;box-sizing:border-box;padding-left:40px;font-size:.875rem;border-radius:8px;border:none;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}@media screen and (min-width:500px){.l_header .m_search .input:focus{box-shadow:0 4px 8px 0 rgba(0,0,0,.1)}}@media screen and (max-width:500px){.l_header .m_search .input{background:var(--color-block);padding-left:8px;border:none}.l_header .m_search .input:focus,.l_header .m_search .input:hover{border:none}}@media (max-width:500px){.l_header .m_search{left:0;width:0;overflow:hidden;position:absolute;background:#fff;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.l_header .m_search .input{border-radius:32px;margin-left:16px;padding-left:16px}.l_header.z_search-open .m_search{width:100%}.l_header.z_search-open .m_search .input{width:calc(100% - 120px)}}ul.m-pc>li>a{color:inherit;border-bottom:2px solid transparent}ul.m-pc>li>a.active,ul.m-pc>li>a:active{border-bottom:2px solid #44d7b6}ul.list-v li:hover>ul.list-v,ul.m-pc li:hover>ul.list-v{display:block}ul.nav-list-h{display:flex;align-items:stretch}ul.nav-list-h>li{position:relative;justify-content:center;height:100%;line-height:2.4;border-radius:4px}ul.nav-list-h>li>a{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-weight:600}ul.list-v{z-index:1;display:none;position:absolute;background:var(--color-card);box-shadow:0 2px 4px 0 rgba(0,0,0,.08),0 4px 8px 0 rgba(0,0,0,.08),0 8px 16px 0 rgba(0,0,0,.08);margin-top:-6px;border-radius:4px;padding:8px 0}ul.list-v.show{display:block}ul.list-v hr{margin-top:8px;margin-bottom:8px}ul.list-v>li{white-space:nowrap;word-break:keep-all}ul.list-v>li.header{font-size:.78rem;font-weight:700;line-height:2em;color:var(--color-meta);margin:8px 16px 4px}ul.list-v>li.header i{margin-right:8px}ul.list-v>li ul{margin-left:0;display:none;margin-top:-40px}ul.list-v .aplayer-container{min-height:64px;padding:6px 16px}ul.list-v>li>a{transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;display:block;color:var(--color-list);font-size:.875rem;line-height:36px;padding:0 20px 0 16px;text-overflow:ellipsis;margin:0 4px;border-radius:4px}@media screen and (max-width:1024px){ul.list-v>li>a{line-height:40px}}ul.list-v>li>a>i{margin-right:8px}ul.list-v>li>a.active,ul.list-v>li>a:active{color:var(--color-list-hl)}ul.list-v>li>a:hover{color:var(--color-list-hl);background:var(--color-site-bg)}.l_header .menu>ul>li>a{display:block;padding:0 8px}.l_header .menu>ul>li>a>i{margin-right:4px}.l_header ul.nav-list-h>li{color:var(--color-list);line-height:64px}.l_header ul.nav-list-h>li>a{max-height:64px;overflow:hidden;color:inherit}.l_header ul.nav-list-h>li>a.active,.l_header ul.nav-list-h>li>a:active{color:#44d7b6}.l_header ul.nav-list-h>li:hover>a{color:var(--color-list-hl)}.l_header ul.nav-list-h>li i.music{animation:rotate-effect 1.5s linear infinite}@-moz-keyframes rotate-effect{0%{transform:rotate(0)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}@-webkit-keyframes rotate-effect{0%{transform:rotate(0)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}@-o-keyframes rotate-effect{0%{transform:rotate(0)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}@keyframes rotate-effect{0%{transform:rotate(0)}25%{transform:rotate(90deg)}50%{transform:rotate(180deg)}75%{transform:rotate(270deg)}100%{transform:rotate(360deg)}}.menu-phone li ul.list-v{right:calc(100% - .5 * 16px)}.menu-phone li ul.list-v ul{right:calc(100% - .5 * 16px)}#wrapper{max-width:1200px;margin:auto}@media screen and (min-width:2048px){#wrapper{max-width:55vw}}#wrapper .menu{flex:1 1 auto;margin:0 16px 0 0}#wrapper .menu .list-v ul{left:calc(100% - .5 * 16px)}.menu-phone{display:none;margin-top:16px;right:8px;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}.menu-phone ul{right:calc(100% - .5 * 16px)}@media screen and (max-width:500px){.menu-phone{display:block}}.cover-wrapper .l_header{transition:all .5s ease;-moz-transition:all .5s ease;-webkit-transition:all .5s ease;-o-transition:all .5s ease;-moz-transition:all .5s ease;-webkit-transition:all .5s ease;-o-transition:all .5s ease;transform:translateY(-128px)}.cover-wrapper .l_header.show{transform:translateY(0)}.l_header{max-width:65vw;left:calc((100% - 65vw) * .5);border-bottom-left-radius:8px;border-bottom-right-radius:8px}@media screen and (max-width:2048px){.l_header{max-width:1232px;left:calc((100% - 1232px) * .5)}}@media screen and (max-width:1232px){.l_header{left:0;border-radius:0;max-width:100%}}@media screen and (max-width:500px){.l_header .container{margin-left:0;margin-right:0}.l_header #wrapper .nav-main .title{padding-left:16px;padding-right:16px}.l_header #wrapper .nav-sub{width:100%}.l_header #wrapper .nav-sub .title{overflow-y:scroll;margin-top:2px;padding:8px 16px}.l_header #wrapper .switcher{display:flex;margin-right:8px;height:64px}.l_header .menu{display:none}}@media screen and (max-width:500px){.list-v li{max-width:270px}}#u-search{display:none;position:fixed;top:0;left:0;width:100%;height:100%;padding:60px 20px;z-index:1001}@media screen and (max-width:680px){#u-search{padding:0}}#u-search .modal{position:fixed;height:80%;width:100%;max-width:640px;left:50%;top:0;margin:64px 0 0 -320px;background:var(--color-card);z-index:3;border-radius:4px;overflow:hidden}@media screen and (max-width:680px){#u-search .modal{box-shadow:none;max-width:none;top:0;left:0;margin:0;height:100%;border-radius:0}}#u-search .modal-ajax-content{opacity:0;visibility:hidden;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}#u-search .modal-ajax-content.loaded{opacity:1;visibility:visible}#u-search .modal-header{position:relative;width:100%;height:64px;z-index:3;border-top-left-radius:4px;border-top-right-radius:4px;font-size:$fontsize;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);background:#fff;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}@media screen and (max-width:680px){#u-search .modal-header{border-radius:0;padding:0}}#u-search .modal-header .btn-close{display:block;position:absolute;width:55px;height:64px;top:0;right:0;color:#44d7b6;cursor:pointer;text-align:center;line-height:64px;vertical-align:middle;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;z-index:2}#u-search .modal-header .btn-close:hover{transform:rotate(90deg)}#u-search .modal-header .modal-loading{position:absolute;bottom:0;left:0;width:100%;height:2px;background:0 0;z-index:1}#u-search .modal-header .modal-loading .modal-loading-bar{display:block;position:relative;width:0%;height:100%;background:#44d7b6;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}#u-search .modal-header #u-search-modal-form{position:relative;width:100%;height:100%;z-index:2}#u-search .modal-header #u-search-modal-form input{color:var(--color-text)}#u-search .modal-header #u-search-modal-form #u-search-modal-input{margin:16px 50px;padding:0 8px;width:calc(100% - 100px - 16px);line-height:2rem;border-radius:4px;vertical-align:middle;border:none;appearance:none;box-shadow:none;background:0 0;transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease;-moz-transition:all .28s ease;-webkit-transition:all .28s ease;-o-transition:all .28s ease}@media screen and (max-width:680px){#u-search .modal-header #u-search-modal-form #u-search-modal-input{padding:0}}#u-search .modal-header #u-search-modal-form #u-search-modal-input:focus{border-top-left-radius:4px;border-top-right-radius:4px}#u-search .modal-header #u-search-modal-btn-submit{position:absolute;top:0;left:0;padding-left:5px;padding-top:2px;background:0 0;border:none;width:50px;height:64px;vertical-align:middle;color:#44d7b6;z-index:2}#u-search .modal-footer{position:absolute;display:none;bottom:0;left:0;width:100%;height:50px;padding:0 15px;background:var(--color-card)}#u-search .modal-footer .logo{position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;z-index:0}#u-search .modal-footer .logo a{display:inline-block;height:50px}#u-search .modal-footer .logo.google img{height:24px;margin-top:13px}#u-search .modal-footer .logo.baidu img{height:22px;margin-top:14px}#u-search .modal-footer .logo img{position:relative;display:inline-block;width:auto;height:18px;margin-top:16px}#u-search .modal-footer .modal-error{position:relative;float:left;vertical-align:middle;line-height:50px;font-size:13px;z-index:1}#u-search .modal-footer .modal-metadata{position:relative;float:left;vertical-align:middle;line-height:50px;font-size:13px;z-index:1}#u-search .modal-footer .nav{position:relative;display:block;float:right;vertical-align:middle;font-size:.875rem;font-weight:700;line-height:50px;color:var(--color-meta);cursor:pointer;z-index:1}#u-search .modal-footer .nav:hover{color:#ff5722}#u-search .modal-footer .nav.btn-next{margin-left:16px}#u-search .modal-footer .nav .icon{font-size:.875rem}#u-search .modal-body{position:absolute;padding:16px;width:100%;height:calc(100% - 64px);top:64px;left:0;overflow-y:scroll;-webkit-overflow-scrolling:touch;background:var(--color-card);border-radius:4px}#u-search .modal-body::-webkit-scrollbar{height:4px;width:4px}#u-search .modal-body::-webkit-scrollbar-track-piece{background:0 0}#u-search .modal-body::-webkit-scrollbar-thumb{background:#44d7b6;cursor:pointer;border-radius:2px}#u-search .modal-body::-webkit-scrollbar-thumb:hover{background:#ff5722}#u-search .modal-body .modal-results{list-style:none}#u-search .modal-body .modal-results .result{position:relative;display:block;padding:16px;border-radius:4px}#u-search .modal-body .modal-results .result b[mark]{color:#29bf9d;text-decoration:underline}#u-search .modal-body .modal-results .result:hover{background:var(--color-site-bg)}#u-search .modal-body .modal-results .result:hover .title{color:var(--color-list-hl)}#u-search .modal-body .modal-results .result .title{display:inline-block;max-width:100%;color:var(--color-list);font-weight:700;padding:1px;margin-bottom:2px;white-space:normal;overflow:hidden;text-overflow:ellipsis;font-size:1.125rem}#u-search .modal-body .modal-results .result .digest{display:block;white-space:inherit;overflow:hidden;word-break:break-all;text-overflow:ellipsis;font-size:.8125rem;color:var(--color-meta)}#u-search .modal-body .modal-results .result .icon{position:absolute;top:50%;right:0;margin-top:-4px;font-size:11px;color:var(--color-meta)}#u-search .modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:1}@media screen and (max-width:2048px){.l_header{left:0!important;border-radius:0!important;max-width:100%!important}}article>p{font-family:-apple-system,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Microsoft YaHei,Source Han Sans SC,Noto Sans CJK SC,WenQuanYi Micro Hei,sans-serif;font-weight:400!important;line-height:2!important;margin:0 0 20px 0}@media screen and (max-width:500px){#safearea{margin:0;box-shadow:none}#safearea .body-wrapper{padding:0}#safearea #l_main article#arc,#safearea #l_main article#comments,#safearea #l_main article#friends,#safearea #l_main article#page,#safearea #l_main article#post{border-radius:0}#safearea #l_main article#cat,#safearea #l_main article#tag{margin:0;border-radius:0}#safearea #l_main .post-wrapper{margin:0 0 16px}#safearea #l_main .post-wrapper .post{border-radius:0}#safearea #l_side .widget.mobile{border-radius:0}}.iconfont{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}.iconfont.emoji{width:1.5em;height:1.5em;vertical-align:-.3em}.rem1p5{font-size:1.5rem}.rem2{font-size:2rem}.rem6{font-size:6rem}.rem12{font-size:12rem}@media (prefers-color-scheme:dark){:root{--color-mode:'dark'}:root:not([data-user-color-scheme]){--color-site-body:#000;--color-site-bg:#21252b;--color-site-inner:#eee;--color-site-footer:#abb2bf;--color-card:#282c34;--color-text:#abb2bf;--color-block:#21252b;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#979fad;--color-h2:#979fad;--color-h3:#979fad;--color-h4:#979fad;--color-h5:#979fad;--color-h6:#979fad;--color-p:#abb2bf;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}:root:not([data-user-color-scheme]) #l_body{background-color:#21252b!important}:root:not([data-user-color-scheme]) .lazyload,:root:not([data-user-color-scheme]) .pdf,:root:not([data-user-color-scheme]) img,:root:not([data-user-color-scheme]) svg.iconfont{filter:brightness(70%)!important}:root:not([data-user-color-scheme]) .fa,:root:not([data-user-color-scheme]) .fad,:root:not([data-user-color-scheme]) .fal,:root:not([data-user-color-scheme]) .fas{filter:brightness(90%)!important}:root:not([data-user-color-scheme]) #wrapper .title{color:var(--color-meta)}:root:not([data-user-color-scheme]) .l_header ul.nav-list-h>li>a,:root:not([data-user-color-scheme]) ul.list-v>li>a{color:var(--color-list)}:root:not([data-user-color-scheme]) .blur{background:var(--color-site-bg)!important}:root:not([data-user-color-scheme]) .nav-main .u-search-input{background:var(--color-card)!important}:root:not([data-user-color-scheme]) #l_main .article .prev-next>a{background:var(--color-block)}:root:not([data-user-color-scheme]) #l_main .article .prev-next>a:hover{background:var(--color-card)}:root:not([data-user-color-scheme]) .article blockquote{background:var(--color-block)}:root:not([data-user-color-scheme]) .article-title a{color:var(--color-h1)}:root:not([data-user-color-scheme]) details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}:root:not([data-user-color-scheme]) details{border:none!important;background:var(--color-site-bg)}:root:not([data-user-color-scheme]) #u-search .modal{background:var(--color-card)!important}:root:not([data-user-color-scheme]) #u-search .modal-header{background:var(--color-card)!important}:root:not([data-user-color-scheme]) #u-search .modal-body{background:var(--color-card)!important}:root:not([data-user-color-scheme]) #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}:root:not([data-user-color-scheme]) .widget.blogger .content .social-wrapper a.social:hover{background:var(--color-card)}:root:not([data-user-color-scheme]) .content{color:var(--color-p)}:root:not([data-user-color-scheme]) .note{background:var(--color-block)!important}:root:not([data-user-color-scheme]) div.tabs ul.nav-tabs li.tab.active a{color:var(--color-p);background:var(--color-card)}:root:not([data-user-color-scheme]) kbd{background:var(--color-block)!important}:root:not([data-user-color-scheme]) .cover-wrapper.dock .menu .list-h a:hover,:root:not([data-user-color-scheme]) .cover-wrapper.featured .menu .list-h a:hover,:root:not([data-user-color-scheme]) .cover-wrapper.focus .menu .list-h a:hover{color:var(--color-text)!important}:root:not([data-user-color-scheme]) .gutter{background:#1d1f23!important;background-color:#1d1f23!important}:root:not([data-user-color-scheme]) .highlight figcaption{background-color:#21252b!important}:root:not([data-user-color-scheme]) .highlight pre .line,:root:not([data-user-color-scheme]) .highlight pre .params{color:rgba(158,142,142,.9)}:root:not([data-user-color-scheme]) :not(.highlight)>table tr{background-color:var(--color-card)}:root:not([data-user-color-scheme]) :not(.highlight)>table th{background:var(--color-site-bg)}:root:not([data-user-color-scheme]) :not(.highlight) table td,:root:not([data-user-color-scheme]) :not(.highlight) table th{border-color:var(--color-site-bg)}:root:not([data-user-color-scheme]) :not(.highlight)>table tr:hover{background:var(--color-codeblock)}:root:not([data-user-color-scheme]) .timenode .highlight{border-color:var(--color-site-bg)!important}:root:not([data-user-color-scheme]) blockquote p{color:var(--color-p)}:root:not([data-user-color-scheme]) #archive-page .archive .all-tags ul li span{color:var(--color-text);background:#6f6f72}:root:not([data-user-color-scheme]) .aplayer{background:var(--color-site-bg)}:root:not([data-user-color-scheme]) .aplayer .aplayer-list ol li:hover{background:rgba(68,215,182,.2)}:root:not([data-user-color-scheme]) .aplayer .aplayer-list ol li.aplayer-list-light{background:var(--color-block)}:root:not([data-user-color-scheme]) .aplayer-info{background:var(--color-site-bg)!important}:root:not([data-user-color-scheme]) .aplayer .aplayer-lrc:before{background:linear-gradient(180deg,#282c34 0,rgba(255,255,255,0))}:root:not([data-user-color-scheme]) .aplayer .aplayer-lrc:after{background:linear-gradient(180deg,rgba(0,0,0,0) 0,rgba(33,33,33,.8))}:root:not([data-user-color-scheme]) .aplayer-pic{filter:brightness(70%)}:root:not([data-user-color-scheme]) .aplayer .aplayer-list ol li{border-top:1px solid var(--color-card)}:root:not([data-user-color-scheme]) .aplayer.aplayer-withlist .aplayer-info{border-bottom:1px solid var(--color-block)}:root:not([data-user-color-scheme]) .widget.grid .content .grid a,:root:not([data-user-color-scheme]) .widget>.content ul.entry a .badge,:root:not([data-user-color-scheme]) .widget>.content ul.popular-posts a .badge{color:#aaa!important}:root:not([data-user-color-scheme]) .highlight:hover,:root:not([data-user-color-scheme]) .highlight>table{background-color:#1d1f23!important}:root:not([data-user-color-scheme]) article#comments p[ct]{color:var(--color-p)!important}:root:not([data-user-color-scheme]) .highlight pre .comment{color:#847a7d!important}:root:not([data-user-color-scheme]) .highlight pre .marked{background-color:#3d424f!important}:root:not([data-user-color-scheme]) div.note.quote{border-color:#555c66!important}:root:not([data-user-color-scheme]) hr{background-color:#555c66!important}:root:not([data-user-color-scheme]) #read_bkg{background:#21252b!important}:root:not([data-user-color-scheme]) #l_header,:root:not([data-user-color-scheme]) #l_main .post,:root:not([data-user-color-scheme]) #l_side .widget,:root:not([data-user-color-scheme]) #rightmenu-content{background-color:#282c34}:root:not([data-user-color-scheme]) .widget.text .content a,:root:not([data-user-color-scheme]) a{color:#abb2bf}:root:not([data-user-color-scheme]) .widget.text .content a:hover,:root:not([data-user-color-scheme]) a:hover{color:#ff5722}:root:not([data-user-color-scheme]) #l_body #s-top.show.hl{background:#5c5e63}:root:not([data-user-color-scheme]) textarea.el-textarea__inner{background:0 0!important}:root:not([data-user-color-scheme]) #desktopNavTitle{display:none!important}:root:not([data-user-color-scheme]) #githubEmoji{display:block!important}:root:not([data-user-color-scheme]) .post_read{background-color:#282c34!important}:root:not([data-user-color-scheme]) #l_main .post,:root:not([data-user-color-scheme]) #l_side .widget,:root:not([data-user-color-scheme]) #rightmenu-content{box-shadow:none}}[data-user-color-scheme=dark]{--color-site-body:#000;--color-site-bg:#21252b;--color-site-inner:#eee;--color-site-footer:#abb2bf;--color-card:#282c34;--color-text:#abb2bf;--color-block:#21252b;--color-codeblock:#343a3c;--color-inlinecode:#d56d28;--color-h1:#979fad;--color-h2:#979fad;--color-h3:#979fad;--color-h4:#979fad;--color-h5:#979fad;--color-h6:#979fad;--color-p:#abb2bf;--color-list:#aaa;--color-list-hl:#69dfc4;--color-meta:#888;--color-link:#888}[data-user-color-scheme=dark] #l_body{background-color:#21252b!important}[data-user-color-scheme=dark] .lazyload,[data-user-color-scheme=dark] .pdf,[data-user-color-scheme=dark] img,[data-user-color-scheme=dark] svg.iconfont{filter:brightness(70%)!important}[data-user-color-scheme=dark] .fa,[data-user-color-scheme=dark] .fad,[data-user-color-scheme=dark] .fal,[data-user-color-scheme=dark] .fas{filter:brightness(90%)!important}[data-user-color-scheme=dark] #wrapper .title{color:var(--color-meta)}[data-user-color-scheme=dark] .l_header ul.nav-list-h>li>a,[data-user-color-scheme=dark] ul.list-v>li>a{color:var(--color-list)}[data-user-color-scheme=dark] .blur{background:var(--color-site-bg)!important}[data-user-color-scheme=dark] .nav-main .u-search-input{background:var(--color-card)!important}[data-user-color-scheme=dark] #l_main .article .prev-next>a{background:var(--color-block)}[data-user-color-scheme=dark] #l_main .article .prev-next>a:hover{background:var(--color-card)}[data-user-color-scheme=dark] .article blockquote{background:var(--color-block)}[data-user-color-scheme=dark] .article-title a{color:var(--color-h1)}[data-user-color-scheme=dark] details>summary{color:var(--color-p)!important;background:var(--color-site-bg)!important}[data-user-color-scheme=dark] details{border:none!important;background:var(--color-site-bg)}[data-user-color-scheme=dark] #u-search .modal{background:var(--color-card)!important}[data-user-color-scheme=dark] #u-search .modal-header{background:var(--color-card)!important}[data-user-color-scheme=dark] #u-search .modal-body{background:var(--color-card)!important}[data-user-color-scheme=dark] #u-search .modal-body .modal-results .result:hover{background:var(--color-block)!important}@media screen and (max-width:500px){[data-user-color-scheme=dark] .l_header .m_search{background:var(--color-site-bg)!important}}[data-user-color-scheme=dark] .widget.blogger .content .social-wrapper a.social:hover{background:var(--color-card)}[data-user-color-scheme=dark] .content{color:var(--color-p)}[data-user-color-scheme=dark] .note{background:var(--color-block)!important}[data-user-color-scheme=dark] div.tabs ul.nav-tabs li.tab.active a{color:var(--color-p);background:var(--color-card)}[data-user-color-scheme=dark] kbd{background:var(--color-block)!important}[data-user-color-scheme=dark] .cover-wrapper.dock .menu .list-h a:hover,[data-user-color-scheme=dark] .cover-wrapper.featured .menu .list-h a:hover,[data-user-color-scheme=dark] .cover-wrapper.focus .menu .list-h a:hover{color:var(--color-text)!important}[data-user-color-scheme=dark] .gutter{background:#1d1f23!important;background-color:#1d1f23!important}[data-user-color-scheme=dark] .highlight figcaption{background-color:#21252b!important}[data-user-color-scheme=dark] .highlight pre .line,[data-user-color-scheme=dark] .highlight pre .params{color:rgba(158,142,142,.9)}[data-user-color-scheme=dark] :not(.highlight)>table tr{background-color:var(--color-card)}[data-user-color-scheme=dark] :not(.highlight)>table th{background:var(--color-site-bg)}[data-user-color-scheme=dark] :not(.highlight) table td,[data-user-color-scheme=dark] :not(.highlight) table th{border-color:var(--color-site-bg)}[data-user-color-scheme=dark] :not(.highlight)>table tr:hover{background:var(--color-codeblock)}[data-user-color-scheme=dark] .timenode .highlight{border-color:var(--color-site-bg)!important}[data-user-color-scheme=dark] blockquote p{color:var(--color-p)}[data-user-color-scheme=dark] #archive-page .archive .all-tags ul li span{color:var(--color-text);background:#6f6f72}[data-user-color-scheme=dark] .aplayer{background:var(--color-site-bg)}[data-user-color-scheme=dark] .aplayer .aplayer-list ol li:hover{background:rgba(68,215,182,.2)}[data-user-color-scheme=dark] .aplayer .aplayer-list ol li.aplayer-list-light{background:var(--color-block)}[data-user-color-scheme=dark] .aplayer-info{background:var(--color-site-bg)!important}[data-user-color-scheme=dark] .aplayer .aplayer-lrc:before{background:linear-gradient(180deg,#282c34 0,rgba(255,255,255,0))}[data-user-color-scheme=dark] .aplayer .aplayer-lrc:after{background:linear-gradient(180deg,rgba(0,0,0,0) 0,rgba(33,33,33,.8))}[data-user-color-scheme=dark] .aplayer-pic{filter:brightness(70%)}[data-user-color-scheme=dark] .aplayer .aplayer-list ol li{border-top:1px solid var(--color-card)}[data-user-color-scheme=dark] .aplayer.aplayer-withlist .aplayer-info{border-bottom:1px solid var(--color-block)}[data-user-color-scheme=dark] .widget.grid .content .grid a,[data-user-color-scheme=dark] .widget>.content ul.entry a .badge,[data-user-color-scheme=dark] .widget>.content ul.popular-posts a .badge{color:#aaa!important}[data-user-color-scheme=dark] .highlight:hover,[data-user-color-scheme=dark] .highlight>table{background-color:#1d1f23!important}[data-user-color-scheme=dark] article#comments p[ct]{color:var(--color-p)!important}[data-user-color-scheme=dark] .highlight pre .comment{color:#847a7d!important}[data-user-color-scheme=dark] .highlight pre .marked{background-color:#3d424f!important}[data-user-color-scheme=dark] div.note.quote{border-color:#555c66!important}[data-user-color-scheme=dark] hr{background-color:#555c66!important}[data-user-color-scheme=dark] #read_bkg{background:#21252b!important}[data-user-color-scheme=dark] #l_header,[data-user-color-scheme=dark] #l_main .post,[data-user-color-scheme=dark] #l_side .widget,[data-user-color-scheme=dark] #rightmenu-content{background-color:#282c34}[data-user-color-scheme=dark] .widget.text .content a,[data-user-color-scheme=dark] a{color:#abb2bf}[data-user-color-scheme=dark] .widget.text .content a:hover,[data-user-color-scheme=dark] a:hover{color:#ff5722}[data-user-color-scheme=dark] #l_body #s-top.show.hl{background:#5c5e63}[data-user-color-scheme=dark] textarea.el-textarea__inner{background:0 0!important}[data-user-color-scheme=dark] #desktopNavTitle{display:none!important}[data-user-color-scheme=dark] #githubEmoji{display:block!important}[data-user-color-scheme=dark] .post_read{background-color:#282c34!important}[data-user-color-scheme=dark] #l_main .post,[data-user-color-scheme=dark] #l_side .widget,[data-user-color-scheme=dark] #rightmenu-content{box-shadow:none}@media screen and (prefers-color-scheme:dark) and (max-width:500px){.l_header .m_search{background:var(--color-site-bg)!important}}</style><link rel="stylesheet" href="https://static.inkss.cn/css/style.css?time=1626801806000" media="print" onload='this.media="all",this.onload=null'><script>let userColorScheme=localStorage.getItem("user-color-scheme");userColorScheme&&document.documentElement.setAttribute("data-user-color-scheme",userColorScheme),document.addEventListener("error",(function(e){const t=e.target,a=e.target.parentElement,r=a.classList.toString(),s=a.parentElement.classList.toString();"img"===t.tagName.toLowerCase()&&(t.classList.add("fix-cursor-default","error"),"fancybox"===r&&"fancybox"===s?(a.parentElement.classList.add("hideFancybox"),a.parentElement.classList.remove("fancybox"),a.classList.remove("fancybox")):"img-bg"===r&&"img-wrap"===s?a.parentElement.classList.add("hideFancybox"):"author"===r?a.parentElement.classList.add("fix-author-imgError"):-1!=r.indexOf("tk-avatar")&&a.parentElement.classList.add("fix-avatar-imgError"))}),!0)</script></head><body><header id="l_header" class="l_header auto shadow show" style="opacity:0"><div class="container"><div id="wrapper"><div class="nav-sub"><p class="title fix-header-title"></p><ul class="switcher nav-list-h m-phone" id="pjax-header-nav-list"><li><a id="s-comment" class="fad fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a id="s-toc" class="s-toc fad fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div><div class="nav-main"> <a id="desktopNavTitle" class="title flat-box" target="_self" href="/">INKSS</a> <a id="githubEmoji" class="title flat-box" style="display:none" target="_self" href="/"><svg class="profile-color-modes" height="45" viewbox="0 0 106 60" fill="none" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><g class="profile-color-modes-illu-group profile-color-modes-illu-red"><path d="M37.5 58.5V57.5C37.5 49.768 43.768 43.5 51.5 43.5V43.5C59.232 43.5 65.5 49.768 65.5 57.5V58.5"/></g><g class="profile-color-modes-illu-group profile-color-modes-illu-orange"><path d="M104.07 58.5C103.401 55.092 97.7635 54.3869 95.5375 57.489 97.4039 54.6411 99.7685 48.8845 94.6889 46.6592 89.4817 44.378 86.1428 50.1604 85.3786 54.1158 85.9519 50.4768 83.7226 43.294 78.219 44.6737 72.7154 46.0534 72.7793 51.3754 74.4992 55.489 74.169 54.7601 72.4917 53.3567 70.5 52.8196"/></g><g class="profile-color-modes-illu-group profile-color-modes-illu-purple"><path d="M5.51109 58.5V52.5C5.51109 41.4543 14.4654 32.5 25.5111 32.5 31.4845 32.5 36.8464 35.1188 40.5111 39.2709 40.7212 39.5089 40.9258 39.7521 41.1245 40"/><path d="M27.511 49.5C29.6777 49.5 28.911 49.5 32.511 49.5"/><path d="M27.511 56.5C29.6776 56.5 26.911 56.5 30.511 56.5"/></g><g class="profile-color-modes-illu-group profile-color-modes-illu-green"><circle cx="5.5" cy="12.5" r="4"/><circle cx="18.5" cy="5.5" r="4"/><path d="M18.5 9.5 18.5 27.5"/><path d="M18.5 23.5C6 23.5 5.5 23.6064 5.5 16.5"/></g><g class="profile-color-modes-illu-group profile-color-modes-illu-blue"><g class="profile-color-modes-illu-frame"><path d="M40.6983 31.5C40.5387 29.6246 40.6456 28.0199 41.1762 27.2317 42.9939 24.5312 49.7417 26.6027 52.5428 30.2409 54.2551 29.8552 56.0796 29.6619 57.9731 29.6619 59.8169 29.6619 61.5953 29.8452 63.2682 30.211 66.0833 26.5913 72.799 24.5386 74.6117 27.2317 75.6839 28.8246 75.0259 33.7525 73.9345 37.5094 74.2013 37.9848 74.4422 38.4817 74.6555 39"/></g><g class="profile-color-modes-illu-frame"><path d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968 40.7845 26.9182 40.086 21.8512 41.1762 20.2317 42.9939 17.5312 49.7417 19.6027 52.5428 23.2409 54.2551 22.8552 56.0796 22.6619 57.9731 22.6619 59.8169 22.6619 61.5953 22.8452 63.2682 23.211 66.0833 19.5913 72.799 17.5386 74.6117 20.2317 75.6839 21.8246 75.0259 26.7525 73.9345 30.5094 75.1352 32.6488 75.811 35.2229 75.811 38.2283 75.811 38.49 75.8058 38.7472 75.7957 39"/><path d="M49.4996 33V35.6757"/><path d="M67.3375 33V35.6757"/></g><g class="profile-color-modes-illu-frame"><path d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968 40.7845 26.9182 40.086 21.8512 41.1762 20.2317 42.9939 17.5312 49.7417 19.6027 52.5428 23.2409 54.2551 22.8552 56.0796 22.6619 57.9731 22.6619 59.8169 22.6619 61.5953 22.8452 63.2682 23.211 66.0833 19.5913 72.799 17.5386 74.6117 20.2317 75.6839 21.8246 75.0259 26.7525 73.9345 30.5094 75.1352 32.6488 75.811 35.2229 75.811 38.2283 75.811 38.49 75.8058 38.7472 75.7957 39"/></g><g class="profile-color-modes-illu-frame"><path d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968 40.7845 26.9182 40.086 21.8512 41.1762 20.2317 42.9939 17.5312 49.7417 19.6027 52.5428 23.2409 54.2551 22.8552 56.0796 22.6619 57.9731 22.6619 59.8169 22.6619 61.5953 22.8452 63.2682 23.211 66.0833 19.5913 72.799 17.5386 74.6117 20.2317 75.6839 21.8246 75.0259 26.7525 73.9345 30.5094 75.1352 32.6488 75.811 35.2229 75.811 38.2283 75.811 38.49 75.8058 38.7472 75.7957 39"/><path d="M49.4996 33V35.6757"/><path d="M67.3375 33V35.6757"/></g><g class="profile-color-modes-illu-frame"><path d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968 40.7845 26.9182 40.086 21.8512 41.1762 20.2317 42.9939 17.5312 49.7417 19.6027 52.5428 23.2409 54.2551 22.8552 56.0796 22.6619 57.9731 22.6619 59.8169 22.6619 61.5953 22.8452 63.2682 23.211 66.0833 19.5913 72.799 17.5386 74.6117 20.2317 75.6839 21.8246 75.0259 26.7525 73.9345 30.5094 75.1352 32.6488 75.811 35.2229 75.811 38.2283 75.811 38.49 75.8058 38.7472 75.7957 39"/></g><g class="profile-color-modes-illu-frame"><path d="M41.508 31.5C41.6336 31.2259 41.7672 30.9582 41.9085 30.6968 40.7845 26.9182 40.086 21.8512 41.1762 20.2317 42.9939 17.5312 49.7417 19.6027 52.5428 23.2409 54.2551 22.8552 56.0796 22.6619 57.9731 22.6619 59.8169 22.6619 61.5953 22.8452 63.2682 23.211 66.0833 19.5913 72.799 17.5386 74.6117 20.2317 75.6839 21.8246 75.0259 26.7525 73.9345 30.5094 75.1352 32.6488 75.811 35.2229 75.811 38.2283 75.811 38.49 75.8058 38.7472 75.7957 39"/><path d="M49.4996 33V35.6757"/><path d="M67.3375 33V35.6757"/></g><g class="profile-color-modes-illu-frame"><path d="M73.4999 40.2236C74.9709 38.2049 75.8108 35.5791 75.8108 32.2283 75.8108 29.2229 75.1351 26.6488 73.9344 24.5094 75.0258 20.7525 75.6838 15.8246 74.6116 14.2317 72.7989 11.5386 66.0832 13.5913 63.2681 17.211 61.5952 16.8452 59.8167 16.6619 57.973 16.6619 56.0795 16.6619 54.2549 16.8552 52.5427 17.2409 49.7416 13.6027 42.9938 11.5312 41.176 14.2317 40.0859 15.8512 40.7843 20.9182 41.9084 24.6968 41.003 26.3716 40.4146 28.3065 40.2129 30.5"/><path d="M82.9458 30.5471 76.8413 31.657"/><path d="M76.2867 34.4319 81.8362 37.7616"/><path d="M49.4995 27.8242V30.4999"/><path d="M67.3374 27.8242V30.4998"/></g><g class="profile-color-modes-illu-frame"><path d="M45.3697 34.2658C41.8877 32.1376 39.7113 28.6222 39.7113 23.2283 39.7113 20.3101 40.3483 17.7986 41.4845 15.6968 40.3605 11.9182 39.662 6.85125 40.7522 5.23168 42.5699 2.53117 49.3177 4.6027 52.1188 8.24095 53.831 7.85521 55.6556 7.66186 57.5491 7.66186 59.3929 7.66186 61.1713 7.84519 62.8442 8.21095 65.6593 4.59134 72.375 2.5386 74.1877 5.23168 75.2599 6.82461 74.6019 11.7525 73.5105 15.5094 74.7112 17.6488 75.3869 20.2229 75.3869 23.2283 75.3869 28.6222 73.2105 32.1376 69.7285 34.2658 70.8603 35.5363 72.6057 38.3556 73.3076 40"/><path d="M49.0747 19.8242V22.4999"/><path d="M54.0991 28C54.6651 29.0893 55.7863 30.0812 57.9929 30.0812 59.0642 30.0812 59.8797 29.8461 60.5 29.4788"/><path d="M66.9126 19.8242V22.4999"/><path d="M33.2533 20.0237 39.0723 22.1767"/><path d="M39.1369 25.0058 33.0935 27.3212"/><path d="M81.8442 19.022 76.0252 21.1751"/><path d="M75.961 24.0041 82.0045 26.3196"/></g><g class="profile-color-modes-illu-frame"><path d="M73.4999 40.2236C74.9709 38.2049 75.8108 35.5791 75.8108 32.2283 75.8108 29.2229 75.1351 26.6488 73.9344 24.5094 75.0258 20.7525 75.6838 15.8246 74.6116 14.2317 72.7989 11.5386 66.0832 13.5913 63.2681 17.211 61.5952 16.8452 59.8167 16.6619 57.973 16.6619 56.0795 16.6619 54.2549 16.8552 52.5427 17.2409 49.7416 13.6027 42.9938 11.5312 41.176 14.2317 40.0859 15.8512 40.7843 20.9182 41.9084 24.6968 41.003 26.3716 40.4146 28.3065 40.2129 30.5"/><path d="M82.9458 30.5471 76.8413 31.657"/><path d="M76.2867 34.4319 81.8362 37.7616"/><path d="M49.4995 27.8242V30.4999"/><path d="M67.3374 27.8242V30.4998"/></g><g class="profile-color-modes-illu-frame"><path d="M40.6983 31.5C40.5387 29.6246 40.6456 28.0199 41.1762 27.2317 42.9939 24.5312 49.7417 26.6027 52.5428 30.2409 54.2551 29.8552 56.0796 29.6619 57.9731 29.6619 59.8169 29.6619 61.5953 29.8452 63.2682 30.211 66.0833 26.5913 72.799 24.5386 74.6117 27.2317 75.6839 28.8246 75.0259 33.7525 73.9345 37.5094 74.2013 37.9848 74.4422 38.4817 74.6555 39"/></g></g></svg></a><div class="menu navigation"><ul class="nav-list-h m-pc"><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-cube NEPHRITIS fa-fw"></i> 导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" id="navigationcategories"><i class="fad fa-folder-open TURQUOISE fa-fw"></i> 分类</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/tags/" id="navigationtags"><i class="fad fa-tags EMERALD fa-fw"></i> 标签</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" id="navigationarchives"><i class="fad fa-archive PETERRIVE fa-fw"></i> 归档</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-browser PETERRIVE fa-fw"></i> 应用</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="https://adc.ink/#user/login" id="https:adcink#userlogin" rel="external nofollow noopener noreferrer" target="_blank"><i class="fad fa-rocket-launch SUNFLOWER fa-fw"></i> KlliyrBox</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://code.szyink.com/login" id="https:codeszyinkcomlogin" rel="external nofollow noopener noreferrer" target="_blank"><i class="fad fa-computer-speaker EMERALD fa-fw"></i> Code Server</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-megaphone SUNFLOWER fa-fw"></i> 更多</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" id="pageabout"><i class="fad fa-drafting-compass SUNFLOWER fa-fw"></i> 关于</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" id="pagenotes"><i class="fad fa-books CARROT fa-fw"></i> 笔记</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" id="pagefriends"><i class="fad fa-stamp ALIZARIN fa-fw"></i> 友链</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/info/" id="pageinfo"><i class="fad fa-comment-alt-smile WETASPHALT fa-fw"></i> 留言</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://szyink.com" id="https:szyinkcom"><i class="fad fa-heart POMEGRANATE fa-fw"></i> 博客</a></li><li><a class="menuitem flat-box"><i id="aplayerHeaderIcon" class="fad fa-compact-disc WISTERIA fa-fw"></i> 音乐</a><ul class="list-v"><li><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay="false" volume="0.7" loop="all" order="list" fixed="false" list-max-height="320px" server="tencent" type="playlist" id="7716882294" list-folded="true"></meting-js></div></li></ul></li><li></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fad fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="想找些什么~"></form></div><ul class="switcher nav-list-h m-phone"><li><a class="s-search fad fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-menu fad fa-bars fa-fw" target="_self" href="javascript:void(0)"></a><ul class="menu-phone list-v navigation white-box"><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-cube NEPHRITIS fa-fw"></i> 导航</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/categories/" id="navigationcategories"><i class="fad fa-folder-open TURQUOISE fa-fw"></i> 分类</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/tags/" id="navigationtags"><i class="fad fa-tags EMERALD fa-fw"></i> 标签</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/navigation/archives/" id="navigationarchives"><i class="fad fa-archive PETERRIVE fa-fw"></i> 归档</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-browser PETERRIVE fa-fw"></i> 应用</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="https://adc.ink/#user/login" id="https:adcink#userlogin" rel="external nofollow noopener noreferrer" target="_blank"><i class="fad fa-rocket-launch SUNFLOWER fa-fw"></i> KlliyrBox</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://code.szyink.com/login" id="https:codeszyinkcomlogin" rel="external nofollow noopener noreferrer" target="_blank"><i class="fad fa-computer-speaker EMERALD fa-fw"></i> Code Server</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover"><i class="fad fa-megaphone SUNFLOWER fa-fw"></i> 更多</a><ul class="list-v"><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/about/" id="pageabout"><i class="fad fa-drafting-compass SUNFLOWER fa-fw"></i> 关于</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/notes/" id="pagenotes"><i class="fad fa-books CARROT fa-fw"></i> 笔记</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/friends/" id="pagefriends"><i class="fad fa-stamp ALIZARIN fa-fw"></i> 友链</a></li><li><a class="menuitem flat-box faa-parent animated-hover" href="/page/info/" id="pageinfo"><i class="fad fa-comment-alt-smile WETASPHALT fa-fw"></i> 留言</a></li></ul></li><li><a class="menuitem flat-box faa-parent animated-hover" href="https://szyink.com" id="https:szyinkcom"><i class="fad fa-heart POMEGRANATE fa-fw"></i> 博客</a></li></ul></li></ul></div></div></div></header><div id="l_body"><div id="l_cover"><div id="none" class="cover-wrapper post search" style="display:none"><div class="cover-bg" style=""></div><div class="cover-body"><div class="top"><p class="title">枋柚梓的猫会发光</p></div><div class="bottom"><div class="m_search"><form name="searchform" class="form u-search-form"> <input type="text" class="input u-search-input" placeholder="繁星永存，记忆亘古不变"><i class="icon fad fa-search fa-fw"></i></form></div><div class="menu navigation"><div class="list-h"><a href="/page/notes/" id="pagenotes"><p>文档</p></a><a href="/page/about/" id="pageabout"><p>关于</p></a><a href="/page/friends/" id="pagefriends"><p>友链</p></a><a href="/page/info/" id="pageinfo"><p>留言</p></a><a href="/navigation/tags/" id="navigationtags"><p>标签</p></a><a href="/navigation/archives/" id="navigationarchives"><p>归档</p></a></div></div></div></div><div id="scroll-down" style="display:none"><i class="fad fa-ship scroll-down-effects"></i></div></div></div><div id="safearea"><div class="body-wrapper" id="pjax-container"><div id="l_main" class><article class="cus-indent article post white-box reveal md shadow article-type-post" id="post" itemscope itemprop="blogPost"><div class="headimg-div"> <a class="headimg-a"><img class="headimg" src="https://static.inkss.cn/img/article/Nginx泛域名解析配置/main.png"></a></div><div class="article-meta" id="top"><h1 class="title"> 泛域名解析配置：从 Nginx 到 CDN</h1><div class="new-meta-box"><div class="new-meta-item author"> <a class="author" href="/" rel="nofollow"><img no-lazy src="https://cdn.jsdelivr.net/gh/inkss/common@master/static/web/avatar.jpg"><p>枋柚梓</p></a></div><div class="new-meta-item wordcount"><a class="notlink"><i class="fad fa-keyboard PETERRIVE fa-fw" aria-hidden="true"></i><p>字数：4.2k 字</p></a></div><div class="new-meta-item readtime"><a class="notlink"><i class="fad fa-hourglass-half BELIZEHOLE fa-fw" aria-hidden="true"></i><p>时长：17 分钟</p></a></div></div></div><p>首先，七一快乐哇~ 热烈庆祝建党一百周年的说~ <span class="rem2"><svg class="iconfont" aria-hidden="true"><use xlink:href="#icon-jr-qiyijiandangjie"/></svg></span></p><p>有段时间没更新文章了，最近处理了一个泛域名解析的问题，于此记录。背景是这样的，最近陆续在服务器上部署应用服务，为了方便起见，大都使用了 Docker 部署。由于不想过多的开放端口，所以打算通过 Nginx 反代进行访问，那么就有两种选择，二级域名/子目录，之前的亲身经历告诉我使用子目录区别应用绝对是大坑，不是所有的程序都能正确区分绝对/相对链接，用二级域才是最正确的选择。</p><p>在使用二级域访问的过程中倍感麻烦，需要确定二级域名，然后去 DNS 处新建解析，再在宝塔面板处新建网站，整个流程相当冗余无趣，仅仅为了反代一个地址还需要建立一堆的网站，真是太不优雅了。既然提出了问题那么就去解决它：理所应当的，想到了泛域名解析，统一使用一处网站配置。</p><br><div class="note quote"><p><strong>本文共包含以下内容：</strong></p><ul><li>Nginx 泛域名解析</li><li>根据 subdomain 匹配反代地址</li><li>防止恶意泛域名解析</li><li>BasicAuth 的认证校验</li><li>宝塔面板的反代访问</li><li>泛域名 SSL 证书申请</li><li>泛域名 CDN 分发、</li><li>泛域名证书的自部署</li></ul></div><h2 id="一、Nginx-侧配置">一、Nginx 侧配置</h2><p><em>关于 DNS 的泛域名解析此处不做重点，在云服务商的控制台配置一下就好。</em></p><p>首先是在宝塔新建一个泛域名网站？大概是吧，虽然我这边设置时一直在提示【主域名不能为泛解析】，所以我这里是新建了一个 <code>www.domain.com</code> 的二级域（因为我的大部分泛域解析只是为了反代本地应用，无需具体的目录指向）。题外话，Nginx 的域名解析有一个优先级，简单理解就是 主域 &gt; 精确的二级域 &gt; 二级泛域。</p><h3 id="泛域名网站监听">泛域名网站监听</h3><p>新建完网站后，先修改配置文件，将 <code>server_name</code> 替换掉，用以响应泛域名地址请求：</p><figure class="highlight plain"><figcaption><span>网站配置</span></figcaption><table><tr><td class="code"><pre><span class="line">server_name  ~^(?&lt;subdomain&gt;.+)\.domain\.com$;</span><br></pre></td></tr></table></figure><p><img src="https://static.inkss.cn/img/article/Nginx%E6%B3%9B%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE/image-20210720224409500.png" alt="泛域名监听"></p><h3 id="根据二级域匹配地址">根据二级域匹配地址</h3><p>这样子配置，在接下来的内容中，可以利用 <strong><code>$subdomain</code></strong> 获取二级域的具体值。然后是反代配置，我们将代码放在 <code>#ERROR-PAGE-START 错误页配置，可以注释、删除或修改</code> 之前。</p><figure class="highlight plain"><figcaption><span>反代配置</span></figcaption><table><tr><td class="code"><pre><span class="line">location ^~ &#x2F; &#123;</span><br><span class="line">  if ($subdomain &#x3D; &quot;test1&quot;) &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8881;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if ($subdomain &#x3D; &quot;test2&quot;) &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8882;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  proxy_set_header Host $host;</span><br><span class="line">  proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">  proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">  proxy_set_header Connection upgrade;</span><br><span class="line">  proxy_set_header Accept-Encoding gzip;</span><br><span class="line">  add_header X-Cache $upstream_cache_status;</span><br><span class="line">  #Set Nginx Cache</span><br><span class="line">  add_header Cache-Control no-cache;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#ERROR-PAGE-START 错误页配置，可以注释、删除或修改</span><br></pre></td></tr></table></figure><p>按照上面的例子，如果我使用 <code>test1.domain.com</code> 访问，那么响应的就是位于 <code>8881</code> 端口的应用。</p><h3 id="防止恶意泛域名解析">防止恶意泛域名解析</h3><p>由于我们在原 <code>www.domain.com</code> 的配置上进行的泛域名监听修改，那么意味着任意一个二级域名访问都会被指向到此处目录，我们需要对 <em>不存在、没有实际使用</em> 的二级域进行屏蔽（或者跳转到其它地址中）。这个需求的实现非常简单且巧妙，由于 Nginx 没有 <code>else</code> 语句，我们通过变量换种思路实现。</p><figure class="highlight plain"><figcaption><span>屏蔽未使用的二级域</span></figcaption><table><tr><td class="code"><pre><span class="line">location ^~ &#x2F; &#123;</span><br><span class="line">  set $flag 0;</span><br><span class="line"></span><br><span class="line">  if ($subdomain &#x3D; &quot;test1&quot;) &#123;</span><br><span class="line">    set $flag 1;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8881;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if ($subdomain &#x3D; &quot;test2&quot;) &#123;</span><br><span class="line">    set $flag 1;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8882;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if ($flag &#x3D; 0) &#123;</span><br><span class="line">    return 444;  # 也可以作跳转</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="BasicAuth-的认证校验">BasicAuth 的认证校验</h3><p>BasicAuth 是一个简洁但实用的权限校验，因为有现成的工具我们直接使用宝塔面板生成密文。在 <strong>访问限制</strong> 处添加密码访问。回到配置文件，找到 <code>#Directory protection rules, do not manually delete</code> 这句话，按照下面的地址进入到这个目录，复制其中 <code>conf</code> 文件中的内容。如果你仔细观察就会发现它就是在 <code>location</code> 中添加了 <code>auth_basic</code> 等命令，所以灵活点，先将此处的引入删除，我们手动添加。将复制到的内容粘贴到 <code>location ^~ /</code> 下面就好了。</p><p>聪明的你一定会想到了，这相当于对所有二级域的根目录做了加密访问，而并不是所有的二级域都需要加密，所以参考上文的 <code>if</code> 判断，我们稍微处理下。</p><figure class="highlight plain"><figcaption><span>指定域名的加密</span></figcaption><table><tr><td class="code"><pre><span class="line">#AUTH_START 地址加密访问</span><br><span class="line">auth_basic_user_file &#x2F;www&#x2F;server&#x2F;pass&#x2F;www.domain.com&#x2F;common.pass;</span><br><span class="line">include enable-php-00.conf;</span><br><span class="line">#AUTH_END</span><br><span class="line"></span><br><span class="line">location ^~ &#x2F; &#123;</span><br><span class="line">  set $flag 0;</span><br><span class="line">  set $client_verify off;</span><br><span class="line"></span><br><span class="line">  if ($subdomain &#x3D; &quot;test1&quot;) &#123;</span><br><span class="line">    set $flag 1;</span><br><span class="line">    set $client_verify &quot;Authorization&quot;;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8881;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  auth_basic $client_verify;</span><br><span class="line"></span><br><span class="line">  #......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如此，需要加密的二级域，只需要添加 <code>set $client_verify &quot;Authorization&quot;;</code> 即可。</p><div class="img-wrap"><div class="img-bg" style="background:var(--color-card)"><img class="img" src="https://static.inkss.cn/img/article/Nginx泛域名解析配置/image-20210721005003928.png" alt="验证不通过将返回 401 Authorization Required" style="height:250px"></div><span class="image-caption">验证不通过将返回 401 Authorization Required</span></div><h3 id="宝塔面板的反代访问">宝塔面板的反代访问</h3><p>都进行到这一步了，我们为什么不把宝塔也给反代了，虽然为了安全使用自定义端口更好，但是在访问地址后面追加端口号真的很影响心情（更何况我服务器还开启了安全入口、BasicAuth认证以及动态口令认证）。给宝塔面板进行反代的思路略微有点清奇，因为是限于内部规则，设置完安全域名后宝塔必须得通过这个域名进行访问（而且是带端口），所以我们在反代的时候得修改对应 <code>$host</code> 。</p><p>反代的本质相当于访问请求到 Nginx 后，由 Nginx 再次发出请求到你所设定的地址，假设我们将宝塔的安全域名设置为 <code>www.domain.com</code> ，我们本地访问时先是通过泛域名解析到服务器，此时不带自定义端口（通过80/443）访问。那么 Nginx 需要代理的就是 <code>www.domain.com:port</code>，所以你懂的我们不能让他触发公网上的 DNS 解析（PS：此处更多的意义上是指当 DNS 的泛域名解析是 CNAME 指向到 CDN 域名的情形，如果再次访问需要拿到服务器真实地址），所以我们本地修改一下 <code>hosts</code> 文件。</p><figure class="highlight plain"><figcaption><span>/etc/hosts</span></figcaption><table><tr><td class="code"><pre><span class="line">127.0.0.1 www.domain.com</span><br></pre></td></tr></table></figure><p>那么，反代宝塔面板的配置文件就可以写成这样：</p><figure class="highlight plain"><figcaption><span>反代宝塔面板</span></figcaption><table><tr><td class="code"><pre><span class="line">location ^~ &#x2F; &#123;</span><br><span class="line">  set $xheader &quot;$host&quot;;</span><br><span class="line"></span><br><span class="line">  if ($subdomain &#x3D; &quot;www&quot;) &#123;</span><br><span class="line">    proxy_pass https:&#x2F;&#x2F;www.domain.com:8888;</span><br><span class="line">    set $xheader &quot;www.domain.com:8888&quot;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  proxy_set_header Host $xheader;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><em>自行结合上面的配置文件整合哈~</em></p><p>现在，我们做到了通过 <code>https://www.domain.com</code> 直接访问宝塔面板。试问反代有什么好处？通过 443 端口进行面板访问，所以这里可以把宝塔面板用到的防火墙端口关闭了。虽然但是，我们是通过本地 hosts 解析转了一圈访问的面板，所以面板的端口还真不能删，不过可以将此端口的权限只给服务器 IP 使用，四舍五入就约等于对外界关闭了端口呀。</p><p>此部分需要在终端操作。</p><figure class="highlight sh"><figcaption><span>此处假设服务器 ip 为 8.8.8.8，宝塔面板端口为 8888</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># 删除原端口授权</span></span><br><span class="line">firewall-cmd --permanent --remove-port=8888/tcp </span><br><span class="line"></span><br><span class="line"><span class="comment"># 为服务器 IP 设置宝塔面板端口的访问权限</span></span><br><span class="line">firewall-cmd --permanent --add-rich-rule=<span class="string">&#x27;rule family=&quot;ipv4&quot; source address=&quot;8.8.8.8&quot; port protocol=&quot;tcp&quot; port=&quot;8888&quot; accept&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="泛域名-SSL-证书申请">泛域名 SSL 证书申请</h3><p>SSL 是必须的，泛域名解析自然需要泛域名证书，我们移步 <code>www.domain.com</code> 的 SSL 选项，选择 <code>Let's Encrypt</code> ，使用 DNS 验证，勾选自动组合泛域名证书，进行正常的申请即可了，由于我们的配置文件是共用一个的，所以一次配置其它地方都能生效。</p><p>宝塔的泛域名证书可以手动设置定时任务，一般还剩 30 天时就会自动进行申请，这点无需担心。</p><p><img src="https://static.inkss.cn/img/article/Nginx%E6%B3%9B%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE/image-20210720224604524.png" alt="泛域名证书申请"></p><h2 id="二、CDN-侧配置">二、CDN 侧配置</h2><p>此处基于腾讯云 CDN 操作，为什么要使用 CDN 呢，除了分发外还有一个好处就是可以隐藏服务器的真实地址，毕竟万一真有小贱人扫服务器也是无奈呀 <svg class="iconfont emoji" aria-hidden="true"><use xlink:href="#icon-liuhan"/></svg>。在腾讯云 CDN 处直接新建泛域名地址即可，按照提示进行域名验证云云。</p><h3 id="泛域名-CDN-分发">泛域名 CDN 分发</h3><p>关于 SSL，使用 CDN 访问网站时，如果需要通过 https 的形式访问，是需要将证书部署到 CDN 侧的。，由于商用的泛域名证书贵的离谱，所以这里我们将宝塔申请的 <code>Let's Encrypt</code> 证书上传上去就行了。</p><p>关于缓存，原则上说应该全程不缓存，CDN 侧只能通过目录/格式等条件进行特定的缓存，没办法根据二级域名进行回源。例如我们无法在 CDN 上区分来自 <code>/static/</code> 路径的请求是哪一个二级域发出的。</p><h3 id="泛域名证书的自部署">泛域名证书的自部署</h3><p>由于 <code>Let's Encrypt</code> 的证书只有三个月的有效期，所以势必需要每隔一段时间就要对证书进行一次更新。服务器这边可以通过宝塔的定时任务自动更新部署，但是 CDN 侧腾讯云并没有提供类似的功能。不过由它的云 API 得知，所有的控制台操作行为的背后都是基于 Api 进行的。</p><p>通过查询文档我们可以得知 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://cloud.tencent.com/document/product/228/41116">UpdateDomainConfig</a> 接口，就可以完成对证书的设定。</p><blockquote><p>UpdateDomainConfig 用于修改内容分发网络加速域名配置信息。</p><p>注意：如果需要更新复杂类型的配置项，必须传递整个对象的所有属性，未传递的属性将使用默认值，建议通过查询接口获取配置属性后，直接修改后传递给本接口。Https 配置由于证书的特殊性，更新时不用传递证书和密钥字段。</p></blockquote><p>然而事实上，更新/修改时，可以传递证书和密钥字段，此时证书不是以腾讯云托管证书的形式存在，而是自有证书。（本来我最初的思路是通过 SSL 接口将证书上传到托管证书里，CDN 这边通过 <code>CertId</code> 进行设置，但若是可以直接指定证书内容的话反而更简单。）</p><p>可以通过腾讯云的在线 Api 自动生成对应语言的代码，由于我对 Python 不熟，这里使用了 Node 版本。</p><figure class="highlight js"><figcaption><span>主要是参数的定义部分，证书可以用 fs.readFileSync() 通过路径读取获得</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> CdnClient(clientConfig);</span><br><span class="line"><span class="keyword">const</span> params = &#123;</span><br><span class="line">  <span class="string">&quot;Domain&quot;</span>: <span class="string">&quot;szyink.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;Https&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Switch&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Http2&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">    <span class="string">&quot;OcspStapling&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Hsts&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Switch&quot;</span>: <span class="string">&quot;on&quot;</span>,</span><br><span class="line">      <span class="string">&quot;MaxAge&quot;</span>: <span class="number">31536000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;CertInfo&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;Certificate&quot;</span>: pem.cert1,</span><br><span class="line">      <span class="string">&quot;PrivateKey&quot;</span>: pem.key1,</span><br><span class="line">      <span class="string">&quot;Message&quot;</span>: <span class="string">&quot;更新日期：&quot;</span> + date.format(<span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="string">&#x27;YYYY-MM-DD HH:mm&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">client.UpdateDomainConfig(params).then(</span><br><span class="line">  data =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125;,</span><br><span class="line">  err =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>剩下的思路就很简单了，我们只需要按照证书路径读取文件内容，设置个定时任务，每隔一个月执行一遍更新即可。需要注意的是，定时任务的命令需要写到绝对命令，类似如下：</p><figure class="highlight sh"><figcaption><span>命令语句，本机的 Node 环境是通过 nvm 安装</span></figcaption><table><tr><td class="code"><pre><span class="line">/root/.nvm/versions/node/v14.17.3/bin/node /root/tencentcdn/index.js</span><br></pre></td></tr></table></figure><h2 id="三、配置的附录内容">三、配置的附录内容</h2><h3 id="获取真实-IP">获取真实 IP</h3><p>当所有指向到服务器的域名都套上一层 CDN 后，理所应当的，在 Nginx 的日志处记录不到真实的客户端 IP 地址，对于宝塔用户来说，只需要修改 Nginx 的主配置文件即可：</p><figure class="highlight plain"><figcaption><span>在配置文件中添加高亮行，然后重启 Nginx 即可~</span></figcaption><table><tr><td class="code"><pre><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">  include mime.types;</span><br><span class="line marked">  set_real_ip_from 0.0.0.0&#x2F;0;</span><br><span class="line marked">  real_ip_header X-Forwarded-For;</span><br><span class="line">  #include luawaf.conf;</span><br><span class="line"></span><br><span class="line">  include proxy.conf;</span><br><span class="line">  &#x2F;&#x2F;...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果你对宝塔做了反代，那么不建议通过宝塔进行 Nginx 的重启/停止操作，在终端中执行最好。</p><h3 id="屏蔽垃圾-UA">屏蔽垃圾 UA</h3><p>互联网上无时无刻存在着一些扫描器，这些大都是无人值守的程序，甚至没有刻意伪装 User-Agent ，下面是我收集的一些 UA 列表，可以在腾讯云 CDN 的访问控制中 <strong>UA 黑白名单配置</strong> 添加。</p><table><thead><tr><th><strong>规则类型</strong></th><th><strong>规则内容</strong></th><th style="text-align:center"><strong>生效类型</strong></th><th style="text-align:center"><strong>生效规则</strong></th><th><strong>备注</strong></th></tr></thead><tbody><tr><td>黑名单</td><td> <code>*spider*|*bot*|*Spider*|*Bot*</code></td><td style="text-align:center">全部内容</td><td style="text-align:center">*</td><td>屏蔽蜘蛛（按需添加）</td></tr><tr><td>黑名单</td><td><code>*nmap*|*NMAP*|*HTTrack*|*sqlmap*|*Java*|*zgrab*</code></td><td style="text-align:center">全部内容</td><td style="text-align:center">*</td><td>常见扫描器</td></tr><tr><td>黑名单</td><td><code>*Python*|*python*|*cur*l*Curl*|*wget|*Wget*</code></td><td style="text-align:center">全部内容</td><td style="text-align:center">*</td><td>常见扫描器</td></tr><tr><td>黑名单</td><td><code>*MJ12bot*|*a Palo Alto*</code></td><td style="text-align:center">全部内容</td><td style="text-align:center">*</td><td>安全机器人</td></tr><tr><td>黑名单</td><td><code>*Go-http-client*</code></td><td style="text-align:center">全部内容</td><td style="text-align:center">*</td><td>安全机器人</td></tr></tbody></table><h3 id="屏蔽恶意-IP">屏蔽恶意 IP</h3><p>UA 是可以伪装的，我通过分析日志抓取了一些恶意访问 IP，由于都是国外的地址，所以直接狠一点，如果所处于的 IP 段是机房类型的，就直接按照大的 IP 段封禁。这个部分是依靠宝塔插件 <strong>系统防火墙</strong> 实现的，下面是导出的规则信息，可以直接复制后导入：</p><figure class="highlight json"><figcaption><span>辣鸡国外 IP 段</span></figcaption><table><tr><td class="code"><pre><span class="line">[&#123;<span class="attr">&quot;id&quot;</span>: <span class="number">32</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;20.0.0.0/8&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;美国慧与科技 &amp; 微软数据中心&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 13:07:01&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">31</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;167.248.133.0/24&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Censys 扫描&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 09:42:39&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">30</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;74.120.14.0/24&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Censys 扫描&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 09:42:38&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">29</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;162.142.125.0/24&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Censys 扫描&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 09:42:38&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">28</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;192.35.168.0/23&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Censys 扫描&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 09:42:38&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">27</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;192.241.128.0/17&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;美国DigitalOcean数据中心&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-20 09:40:45&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">25</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;18.224.0.0/14&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Amazon数据中心 224-227&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-17 11:35:11&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">24</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;18.192.0.0/11&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Amazon数据中心 192-223&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-17 11:35:18&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">23</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;18.160.0.0/11&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;Amazon数据中心 160-191&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-17 11:32:23&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">20</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;4.122.0.0/16&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;美国德梅因Microsoft数据中心&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-16 10:14:08&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">17</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;52.221.0.0/16&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;新加坡Amazon数据中心&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-16 10:08:16&quot;</span>&#125;, &#123;<span class="attr">&quot;id&quot;</span>: <span class="number">16</span>, <span class="attr">&quot;types&quot;</span>: <span class="string">&quot;drop&quot;</span>, <span class="attr">&quot;address&quot;</span>: <span class="string">&quot;128.14.0.0/16&quot;</span>, <span class="attr">&quot;brief&quot;</span>: <span class="string">&quot;美国洛杉矶Zenlayer数据中心&quot;</span>, <span class="attr">&quot;addtime&quot;</span>: <span class="string">&quot;2021-07-16 10:08:25&quot;</span>&#125;]</span><br></pre></td></tr></table></figure><p>如你所见，这个封禁是激进的，甚至对 20/8 整个上千万个 IP 段进行了大规模屏蔽，不过由于他们位于 IDC 段中，而且还是国外 IP，所以影响也不大。（此处真的感叹由于互联网的发源地是美国，谁能想到一个拥有近千万个地址段就给了两家公司来用，甚至于他们除了这个范围外在其它范围内还有地址，再想想国内家用公网 IP 的稀缺，真的是，得展望 IPV6 呀）</p><h3 id="拦截恶意请求">拦截恶意请求</h3><p>Hexo 是个静态站，即使它放进了服务器中，你能想到一堆机器人按照 Wordpress 的方式请求 Hexo 站吗？看到日志的时候简直是无语死了，内心 OS：扫你妹呀！</p><figure class="highlight plain"><figcaption><span>在 Hexo 站的配置文件中添加如下内容，可以选择跳转到首页或者返回 444</span></figcaption><table><tr><td class="code"><pre><span class="line">#静态网站天天扫，简直神经病，扫你妹啊</span><br><span class="line">location ~ .*\.(php)$</span><br><span class="line">&#123;</span><br><span class="line">  rewrite ^&#x2F; https:&#x2F;&#x2F;domain.com permanent;  # or return 444;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、最后的最后">四、最后的最后</h2><p>最最终，我们完成了泛域名相关的各类处理，证书的部署上也做到了自动完成~ <svg class="iconfont emoji" aria-hidden="true"><use xlink:href="#icon-xiaodiaodaya"/></svg></p><div class="footer"></div><div class="article-meta" id="bottom"><div class="new-meta-box"><div class="new-meta-item category"><a class="notlink"><i class="fad fa-folder-open EMERALD fa-fw" aria-hidden="true"></i> <a class="category-link" href="/navigation/categories/%E6%95%99%E7%A8%8B/">教程</a></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/Nginx/" rel="nofollow"><i class="fad fa-hashtag WETASPHALT fa-fw" aria-hidden="true"></i><p>Nginx</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/CDN/" rel="nofollow"><i class="fad fa-hashtag WETASPHALT fa-fw" aria-hidden="true"></i><p>CDN</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E6%B3%9B%E5%9F%9F%E5%90%8D/" rel="nofollow"><i class="fad fa-hashtag WETASPHALT fa-fw" aria-hidden="true"></i><p>泛域名</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E5%AE%9D%E5%A1%94/" rel="nofollow"><i class="fad fa-hashtag WETASPHALT fa-fw" aria-hidden="true"></i><p>宝塔</p></a></div><div class="new-meta-item date" itemprop="dateUpdated" datetime="2021-07-20T22:28:00+00:00"><a class="notlink"><i class="fad fa-edit GREENSEA fa-fw" aria-hidden="true"></i><p>更新于：2021年7月20日</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fad fa-calendar-alt TURQUOISE fa-fw" aria-hidden="true"></i><p>发布于：2021年6月29日</p></a></div></div></div><div class="prev-next"><a class="prev" href="/blog/728c42d9/"><p class="title"><i class="fad fa-chevron-left" aria-hidden="true"></i>城市天际线基础 MOD</p><p class="content"> ...</p></a><a class="next" href="/blog/56dd46d6/"><p class="title">小站搬家记<i class="fad fa-chevron-right" aria-hidden="true"></i></p><p class="content">从阿里云迁到腾讯云了，从服务器迁到轻量服务器了，从辽备迁到皖备了。心路历程可以参见这篇文章：小站的搬家经历。此处记录搬家历史。对于动态网站，搬家无非就是两件事，搬网站目录的所有文件和搬数据库，一...</p></a></div></article><article class="post white-box reveal shadow" id="comments"><p ct><i class="fad fa-comments POMEGRANATE"></i> 评论</p><div id="twikoo_container"><i class="fad fa-cog fa-spin fa-fw fa-2x"></i></div></article><div class="cus-article-bkg" style="display:none;background-image:url(/img/article/Nginx泛域名解析配置/wallhaven-k778dq.jpg)"></div></div><aside id="l_side"><section class="widget text shadow desktop"><header><i class="fad fa-user-robot ASBESTOS fa-fw" aria-hidden="true"></i> <span class="name">公告信息</span></header><div class="content"><p>持续整修中...</p><p>鸽了呢... <svg class="iconfont emoji" aria-hidden="true"><use xlink:href="#icon-kulou"/></svg></p></div></section><section class="widget grid shadow desktop mobile"><header><i class="fad fa-map-signs ASBESTOS fa-fw" aria-hidden="true"></i> <span class="name">站内导航</span></header><div class="content"><div class="grid navigation fixed"><a class="flat-box" href="/page/notes/" id="pagenotes"><i class="fad fa-books GREENSEA fa-fw" aria-hidden="true"></i> 文档笔记</a><a class="flat-box" href="/page/notes/manual/" id="pagenotesmanual"><i class="fad fa-books-medical NEPHRITIS fa-fw" aria-hidden="true"></i> 用户手册</a><a class="flat-box" href="/page/timeline/" id="pagetimeline"><i class="fad fa-leaf-heart POMEGRANATE fa-fw" aria-hidden="true"></i> 建站历史</a><a class="flat-box" href="/page/info/" id="pageinfo"><i class="fad fa-comment-alt-smile WISTERIA fa-fw" aria-hidden="true"></i> 站内留言</a><a class="flat-box" href="/page/friends/" id="pagefriends"><i class="fad fa-stamp CONCRETE fa-fw" aria-hidden="true"></i> 小伙伴们</a><a class="flat-box" href="/atom.xml" id="atomxml"><i class="fad fa-rss SUNFLOWER fa-fw" aria-hidden="true"></i> RSS 订阅</a></div></div></section><section class="widget toc-wrapper shadow desktop mobile" id="toc-div"><header><i class="fad fa-list ASBESTOS fa-fw" aria-hidden="true"></i> <span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81Nginx-%E4%BE%A7%E9%85%8D%E7%BD%AE"><span class="toc-text">一、Nginx 侧配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9F%9F%E5%90%8D%E7%BD%91%E7%AB%99%E7%9B%91%E5%90%AC"><span class="toc-text">泛域名网站监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%8C%B9%E9%85%8D%E5%9C%B0%E5%9D%80"><span class="toc-text">根据二级域匹配地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%AD%A2%E6%81%B6%E6%84%8F%E6%B3%9B%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90"><span class="toc-text">防止恶意泛域名解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BasicAuth-%E7%9A%84%E8%AE%A4%E8%AF%81%E6%A0%A1%E9%AA%8C"><span class="toc-text">BasicAuth 的认证校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF%E7%9A%84%E5%8F%8D%E4%BB%A3%E8%AE%BF%E9%97%AE"><span class="toc-text">宝塔面板的反代访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9F%9F%E5%90%8D-SSL-%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7"><span class="toc-text">泛域名 SSL 证书申请</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81CDN-%E4%BE%A7%E9%85%8D%E7%BD%AE"><span class="toc-text">二、CDN 侧配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9F%9F%E5%90%8D-CDN-%E5%88%86%E5%8F%91"><span class="toc-text">泛域名 CDN 分发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9F%9F%E5%90%8D%E8%AF%81%E4%B9%A6%E7%9A%84%E8%87%AA%E9%83%A8%E7%BD%B2"><span class="toc-text">泛域名证书的自部署</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E9%85%8D%E7%BD%AE%E7%9A%84%E9%99%84%E5%BD%95%E5%86%85%E5%AE%B9"><span class="toc-text">三、配置的附录内容</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9E-IP"><span class="toc-text">获取真实 IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E5%9E%83%E5%9C%BE-UA"><span class="toc-text">屏蔽垃圾 UA</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%8F%E8%94%BD%E6%81%B6%E6%84%8F-IP"><span class="toc-text">屏蔽恶意 IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E6%81%B6%E6%84%8F%E8%AF%B7%E6%B1%82"><span class="toc-text">拦截恶意请求</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%9C%80%E5%90%8E%E7%9A%84%E6%9C%80%E5%90%8E"><span class="toc-text">四、最后的最后</span></a></li></ol></div></section></aside><script>window.pdata={},pdata.ispage=!0,pdata.postTitle="泛域名解析配置：从 Nginx 到 CDN",pdata.commentPath="",pdata.commentPlaceholder="";var l_header=document.getElementById("l_header");l_header.classList.add("show")</script></div><footer class="footer clearfix"><br><br><div><div class="footerMax490">皖 ICP 备 <a href="https://beian.miit.gov.cn/" target="_blank" rel="external nofollow noopener noreferrer" style="cursor:wait">2021008088</a> 号</div></div><div><div class="footerMax490">Copyright 2018 - 2021 szyink. All Rights Reserved</div></div><div><p><a href="/">枋柚梓的猫会发光</a></p></div><div><p><i class="fad fa-spider-black-widow POMEGRANATE"></i></p></div></footer><a id="s-top" class="fad fa-arrow-up fa-fw" href="javascript:void(0)"></a></div></div><div><script>function RunItem(){function t(t,e){this.name=e||t.name,this.run=()=>{try{t()}catch(t){console.log(t)}}}this.list=[],this.start=()=>{for(var t=0;t<this.list.length;t++)this.list[t].run()},this.push=(e,n)=>{var s=new t(e,n);this.list.push(s)}}window.volantis={},volantis.$={},volantis.pjax={},volantis.pjax.method={complete:new RunItem,error:new RunItem,send:new RunItem},volantis.pjax={...volantis.pjax,push:volantis.pjax.method.complete.push,error:volantis.pjax.method.error.push,send:volantis.pjax.method.send.push},volantis.dark={},volantis.dark.method={toggle:new RunItem},volantis.dark={...volantis.dark,push:volantis.dark.method.toggle.push},volantis.js=(t,e)=>new Promise(n=>{setTimeout((function(){var s=document.getElementsByTagName("body")[0]||document.documentElement,o=document.createElement("script");if(o.setAttribute("type","text/javascript"),e)if(JSON.stringify(e))for(let t in e)o[t]="onload"==t?()=>{e[t](),n()}:e[t];else o.onload=()=>{e(),n()};else o.onload=n;o.setAttribute("src",t),s.appendChild(o)}))}),volantis.css=t=>new Promise(e=>{setTimeout((function(){var n=document.createElement("link");n.rel="stylesheet",n.href=t,n.onload=e,document.getElementsByTagName("head")[0].appendChild(n)}))})</script><div style="display:none"> <img style="display:none" src="" onerror='this.onerror=null;var str1="inkss.cn",str2="document.location.host",str3=eval(str2);str1!=str3&&"localhost:4000"!=str3&&"localhost:5050"!=str3&&(do_action="location.href=location.href.replace(document.location.host,&#39;inkss.cn&#39;)",alert(decodeURI("%E6%82%A8%E7%8E%B0%E5%9C%A8%E5%A4%84%E4%BA%8E%E6%81%B6%E6%84%8F%E9%95%9C%E5%83%8F%E7%AB%99%E4%B8%AD%EF%BC%8C%E5%8D%B3%E5%B0%86%E8%B7%B3%E8%BD%AC%E5%9B%9E%E6%BA%90%E7%AB%99!")),eval(do_action))'></div><script>top.location!=self.location&&(top.location=self.location),volantis.css("/fonts/fontawesome/css/all.min.css")</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5/dist/jquery.min.js"></script><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fad PETERRIVE fa-arrow-left fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fad PETERRIVE fa-arrow-right fa-fw"></i></a><a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fad PETERRIVE fa-redo fa-fw"></i></a><a class="nav icon-only fix-cursor-default" href="/"><i class="fad PETERRIVE fa-home fa-fw"></i></a></li><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyText"><i class="fad PETERRIVE fa-copy fa-fw"></i> 复制文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyPaste"><i class="fad PETERRIVE fa-paste fa-fw mR12"></i> 粘贴文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySelect"><i class="fad PETERRIVE fa-object-ungroup fa-fw mR12"></i> 全选文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyCut"><i class="fad PETERRIVE fa-cut fa-fw mR12"></i> 剪切文本</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="openTab"><i class="fad PETERRIVE fa-external-link-square-alt fa-fw mR12"></i> 在新标签页打开</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copySrc"><i class="fad PETERRIVE fa-image fa-fw mR12"></i> 复制图片地址</span><span class="vlts-menu opt fix-cursor-default menu-Option" data-fn-type="copyImg"><i class="fad PETERRIVE fa-images fa-fw mR12"></i> 复制图片文件</span></li><hr class="menuLoad-Content"><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/info/" id="pageinfo"><i class="fad fa-fish WETASPHALT fa-fw"></i> 留言版</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/foreverblog/" id="pageforeverblog"><i class="fad fa-glass-cheers PETERRIVE fa-fw"></i> 十年之约</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/friends/" id="pagefriends"><i class="fad fa-flower-daffodil AMETHYST fa-fw"></i> 我的朋友们</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/navigation/archives/" id="navigationarchives"><i class="fad fa-globe-asia CONCRETE fa-fw"></i> 文章归档</a></li><li class="menuLoad-Content"><a class="vlts-menu fix-cursor-default" href="/page/about/" id="pageabout"><i class="fad fa-gingerbread-man WISTERIA fa-fw"></i> 关于我</a></li><hr class="menuLoad-Content"><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default" id="printHtml"><i class="fad fa-print TURQUOISE fa-fw"></i> 打印页面</span></li><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default" id="readingModel"><i class="fad fa-book-open EMERALD fa-fw"></i> 阅读模式</span></li><li class="option menuOption-Content"><span class="vlts-menu opt fix-cursor-default toggle-mode-btn" id="menuDarkBtn"><i class="fad fa-cloud-sun WISTERIA fa-fw"></i> 暗黑模式</span></li><div id="menuMusic"><li class="music name menuOption-Content"><p class="nav music-title fix-cursor-default"></p></li><li class="music ctrl"><a class="nav icon-only backward fix-cursor-default" onclick="volantis.rightMenu.aplayerBackward()"><i class="fad fa-step-backward fa-fw WISTERIA"></i></a><a class="nav icon-only toggle fix-cursor-default" onclick="volantis.rightMenu.aplayerToggle()"><i class="fad fa-play fa-fw WISTERIA"></i></a><a class="nav icon-only forward fix-cursor-default" onclick="volantis.rightMenu.aplayerForward()"><i class="fad fa-step-forward fa-fw WISTERIA"></i></a></li><li class="music volume"><a class="nav volume"><div class="aplayer-volume-bar-wrap"><div class="aplayer-volume-bar fix-cursor-pointer"><div class="aplayer-volume"></div><i class="left fad fa-volume-off fa-fw PETERRIVE"></i><i class="right fad fa-volume-up fa-fw PETERRIVE"></i></div></div></a></li></div></ul></div><script>volantis.rightMenu={},volantis.rightMenu.music=!0,volantis.rightMenu.aplayerBackward=()=>{event.stopPropagation(),MainAPlayer.aplayerBackward&&MainAPlayer.aplayerBackward()},volantis.rightMenu.aplayerToggle=()=>{event.stopPropagation(),MainAPlayer.aplayerToggle&&MainAPlayer.aplayerToggle()},volantis.rightMenu.aplayerForward=()=>{event.stopPropagation(),MainAPlayer.aplayerForward&&MainAPlayer.aplayerForward()},volantis.rightMenu.defaultStyles=!0,volantis.js("/js/rightMenu.js")</script><script>const rootElement=document.documentElement,darkModeStorageKey="user-color-scheme",rootElementDarkModeAttributeName="data-user-color-scheme",setLS=(e,t)=>{localStorage.setItem(e,t)},removeLS=e=>{localStorage.removeItem(e)},getLS=e=>localStorage.getItem(e),getModeFromCSSMediaQuery=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",resetRootDarkModeAttributeAndLS=()=>{var e;rootElement.removeAttribute("data-user-color-scheme"),e=darkModeStorageKey,localStorage.removeItem(e)},validColorModeKeys={dark:!0,light:!0},applyCustomDarkModeSettings=e=>{const t=e||getLS(darkModeStorageKey);getCustomDarkMode(),t===getModeFromCSSMediaQuery()?resetRootDarkModeAttributeAndLS():validColorModeKeys[t]?rootElement.setAttribute("data-user-color-scheme",t):resetRootDarkModeAttributeAndLS()},invertDarkModeObj={dark:"light",light:"dark"},getCustomDarkMode=()=>{let e=getLS(darkModeStorageKey);if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}volantis.dark.mode="dark"==e?"light":"dark"},toggleCustomDarkMode=()=>{let e=getLS(darkModeStorageKey);if(validColorModeKeys[e])e=invertDarkModeObj[e];else{if(null!==e)return;e=invertDarkModeObj[getModeFromCSSMediaQuery()]}var t,o;return t=darkModeStorageKey,o=e,localStorage.setItem(t,o),e};volantis.dark.toggle=()=>{const e=toggleCustomDarkMode();applyCustomDarkModeSettings(e),volantis.dark.method.toggle.start()};var btn=$(".toggle-mode-btn","#wrapper,#rightmenu-wrapper");function bindToggleButton(){btn.on("click",volantis.dark.toggle)}applyCustomDarkModeSettings(),document.addEventListener("DOMContentLoaded",bindToggleButton),volantis.pjax.push(bindToggleButton),volantis.pjax.send(()=>{btn.unbind("click")},"toggle-mode-btn-unbind")</script><script>function loadIssuesJS(){null!=document.getElementById("sites-api")&&"undefined"==typeof SitesJS&&volantis.js("/js/plugins/sites.js");null!=document.getElementById("friends-api")&&"undefined"==typeof FriendsJS&&volantis.js("/js/plugins/friends.js");null!=document.getElementById("contributors-api")&&"undefined"==typeof ContributorsJS&&volantis.js("/js/plugins/contributors.js")}$((function(){loadIssuesJS()})),volantis.pjax.push(()=>{loadIssuesJS()})</script><script>volantis.APlayerController={},volantis.APlayerController.id="7716882294",volantis.APlayerController.volume="0.7",volantis.css("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"),(async()=>{await volantis.js("https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"),await volantis.js("https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"),await volantis.js("/js/aplayer.js"),volantis.APlayerController.music=!0})();var checkMetings=setInterval((function(){if(document.querySelectorAll("meting-js")[0].aplayer&&document.querySelectorAll("meting-js")[0].aplayer.on){clearInterval(checkMetings);try{var a=document.querySelectorAll("meting-js");a.forEach((e,l)=>{var t=$(e)[0].meta.id===volantis.APlayerController.id&&volantis.APlayerController.music;t&&MainAPlayer.checkAPlayer();var s=a[l].aplayer;s.on("play",(function(a){$("#aplayerHeaderIcon").removeClass("music").addClass("music");var e=s.list.index,l=s.list.audios[e].title,r=s.list.audios[e].artist;volantis.message("音乐通知","正在播放："+l+" - "+r,"info"),t&&(volantis.APlayerController.status="play")})),s.on("pause",(function(a){$("#aplayerHeaderIcon").removeClass("music");var e=s.list.index,l=s.list.audios[e].title,r=s.list.audios[e].artist;volantis.message("音乐通知","暂停播放："+l+" - "+r,"info"),t&&(volantis.APlayerController.status="pause")})),s.on("error",(function(a){$("#aplayerHeaderIcon").removeClass("music");var e=s.list.index,l=s.list.audios[e].title;volantis.message("音乐通知","歌曲："+l+"加载失败~","warning"),t&&(volantis.APlayerController.status="error")}))})}catch(a){}}}),100)</script><script>function load_twikoo(){volantis.js("https://cdn.jsdelivr.net/npm/twikoo@1.3.0",pjax_twikoo)}function pjax_twikoo(){if(!document.querySelectorAll("#twikoo_container")[0])return;let o=pdata.commentPath;if(0==o.length){o=""||"decodeURI(window.location.pathname)"}twikoo.init(Object.assign({js:"https://cdn.jsdelivr.net/npm/twikoo@1.3.0",path:null,envId:"twikoo-web-4g84uta0261cb889"},{el:"#twikoo_container",path:o}))}$((function(){document.querySelectorAll("#twikoo_container")[0]&&load_twikoo()})),volantis.pjax.push(()=>{"undefined"==typeof twikoo?load_twikoo():pjax_twikoo()},"twikoo")</script><script src="https://static.inkss.cn/js/app.js"></script><script>const SearchServiceimagePath="https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@master/img/",ROOT="/".endsWith("/")?"/":"//";function listenSearch(){customSearch=new HexoSearch({imagePath:SearchServiceimagePath})}function setSearchService(){listenSearch(),document.addEventListener("pjax:success",listenSearch)}$(".input.u-search-input").one("focus",(function(){volantis.js("/js/search/hexo.js",setSearchService)}))</script><script>function pjax_initArticleBkg(){$(".cus-article-bkg").fadeOut("slow")}$((function(){pjax_initArticleBkg()})),volantis.pjax.push(pjax_initArticleBkg)</script><script>volantis.message=(s,e,a,t,i=3e3)=>{function m(s,e,a,t,i){$.message({title:s,message:e,type:a,autoClose:t,time:i})}void 0===$.message?(volantis.css("/css/message.css"),volantis.js("/js/message.js",()=>{m(s,e,a,t,i)})):m(s,e,a,t,i)}</script><pjax></pjax><script>function listennSidebarTOC(){const e=document.querySelectorAll(".toc li");if(!e.length)return;const t=[...e].map(e=>{const t=e.querySelector(".toc-link"),n=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:n.offsetTop+document.getElementById("safearea").offsetTop+5,behavior:"smooth"})}),n});!function n(o){o=Math.floor(o+1e4);let r=new IntersectionObserver((r,c)=>{let i=document.documentElement.scrollHeight+document.getElementById("safearea").offsetTop+5;if(i>o)return c.disconnect(),void n(i);let a=function(e){let n=0,o=e[n];if(o.boundingClientRect.top>0)return n=t.indexOf(o.target),0===n?0:n-1;for(;n<e.length;n++){if(!(e[n].boundingClientRect.top<=0))return t.indexOf(o.target);o=e[n]}return t.indexOf(o.target)}(r);!function(e){if(e.classList.contains("active-current"))return;document.querySelectorAll(".toc .active").forEach(e=>{e.classList.remove("active","active-current")}),e.classList.add("active","active-current");let t=e.parentNode;for(;!t.matches(".toc");)t.matches("li")&&t.classList.add("active"),t=t.parentNode}(e[a])},{rootMargin:o+"px 0px -100% 0px",threshold:0});t.forEach(e=>{e&&r.observe(e)})}(document.documentElement.scrollHeight)}document.addEventListener("DOMContentLoaded",listennSidebarTOC),document.addEventListener("pjax:success",listennSidebarTOC)</script><script src="https://static.inkss.cn/js/iconfont-inkss.js"></script><script src="https://static.inkss.cn/js/iconfont-emoji.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><div class="pjax-animate"><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><div id="loading-bar-wrapper"><script>NProgress.configure({parent:"#loading-bar-wrapper",trickleSpeed:100})</script></div><script>window.ShowLoading=function(){NProgress.start()},window.HideLoading=function(){NProgress.done()}</script><script>volantis.pjax.push(window.HideLoading,"HideLoading"),volantis.pjax.send(window.ShowLoading,"ShowLoading"),volantis.pjax.error(window.HideLoading,"HideLoading")</script></div><script>var pjax;document.addEventListener("DOMContentLoaded",(function(){pjax=new Pjax({elements:'a[href]:not([href^="#"]):not([href="javascript:void(0)"]):not([pjax-fancybox])',selectors:["title","pjax","#l_cover","#pjax-container","#pjax-header-nav-list"],cacheBust:!1,timeout:5e3})})),document.addEventListener("pjax:send",(function(e){try{var n=window.location.pathname,t=e.triggerElement.href,a=[""];""!=a[0]&&a.forEach(e=>{-1==n.indexOf(e)&&-1==t.indexOf(e)||(window.location.href=t)})}catch(e){}volantis.$.switcher.removeClass("active"),volantis.$.header.removeClass("z_search-open"),volantis.$.wrapper.removeClass("sub"),volantis.$.topBtn.unbind("click"),$(".menu a","#l_header,#l_cover").unbind("click"),$(window).unbind("resize"),$(window).unbind("scroll"),$(document).unbind("scroll"),$(document).unbind("click"),$("body").unbind("click"),volantis.pjax.method.send.start()})),document.addEventListener("pjax:complete",(function(){$("script[data-pjax], .pjax-reload script").each((function(){$(this).parent().append($(this).remove())})),volantis.pjax.method.complete.start(),$(".cus-article-bkg").fadeIn("slow")})),document.addEventListener("pjax:error",(function(e){volantis.pjax.method.error.start(),window.location.href=e.triggerElement.href}))</script><div id="BKG"></div></div></body></html>